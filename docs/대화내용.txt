  1. baseline (기준): 전체 인원 기준 평균 근무일
  2. actual (실제): 특정 직원의 실제 근무일
  3. deviation (편차): baseline - actual (양수 = 덜 일함)
  4. 필요 인력 : 원장 배치에 따라 필요한 배치인력 
  5. 연차 off 슬롯 :  연차나 오프를 신청할 수 있는 인원수 
- 기준 = 총 필요 인력 / 총 배치 인력
기준의 종류(형평성 계산하는 내용 추가: 설정에서 설정된 값 : 야근, 주말, 공휴일전후, 공휴일 중)
기본 기준는 근무일 기준 = 총 필요 인력 / 총 배치인력
형평성 기준 예시 야근 기준는 야근하는날 필요한 인력 / 총 배치인력
- 특정 직원의 실제는 실제 근무일 수(형평성 선택에 따라 종류 추가)
예 특정 직원의 주말 근무일 등
- 편차 는 기준-실제(형평에 따라 종류 추가)
예 주말 편차
- 하루연차오프슬롯 = 총인원-필요인력 
- 주별 연차오프슬롯 = 하루연차오프슬롯의 합-20*2
- 주4일근무계산 = 주별로 4-그주실제근무
형평성점수는=편차
배치시편차계산
기본점수(전달배치후편차)+편차
예 9월 주말편차 마지막 값이 -1이고 전체 주말에 필요한 인력이 40 이면 기준은 40/20=2
그럼 첫 뻔째 주말 배치시 점수는 -1(전달이월편차)+2(이번달기준)-1(실제)=0 이됨 
다음 근무 배정시 편차는 0이무로 0보다 큰사람들을 우선 배치함 
 

 올바른 구조:
  1. Staff 테이블 → 최종 편차 저장 (이번 달 배치 완료 후 최종값)
  2. 전월 편차는 별도 테이블/필드에 저장 → 다음 달 원장 스케줄 세팅 시 Staff 테이블의 최종
  편차를 복사
  3. 계산 시 → 전월 편차 불러와서 + (평균 - 실제) = 최종 편차
  4. 재배치 시 → 다시 전월 편차 불러와서 재계산
  5. 배포 후 다음달 세팅 시 → Staff 테이블의 최종 편차를 전월 편차로 저장

  현재 문제:
  - 10월 계산 시 9월 전월 편차(0이어야 함)를 불러와야 하는데
  - calculateStaffFairnessV2가 Staff 테이블의 현재 편차를 바로 불러오고 있음
  - 그래서 테스트하면서 생긴 Staff 테이블의 값(0.45, -0.55 등)이 그대로 사용됨
  - 같은 근무일인데 편차가 다른 이유

 Schedule 테이블에 JSON으로 저장하는 방식입니다.

  이유:

  1. 월별 스케줄과 연관성
    - 각 월의 스케줄과 그 달의 전월 편차가 함께 저장되어 논리적으로 명확함
    - 10월 스케줄 생성 시 → 9월 최종 편차를 10월 스케줄에 저장
  2. 재배치 시 편리함
    - 재배치할 때 해당 Schedule의 전월 편차를 바로 읽어서 사용
    - 별도 테이블 조회 불필요
  3. 이력 관리 용이
    - 각 월별로 그 당시의 전월 편차가 보존됨
    - 나중에 과거 데이터 분석 시 유용
  4. 구현 간단함
    - 기존 Schedule 테이블에 필드만 추가
    - 새 테이블 생성보다 마이그레이션 간단

  구현 방안:
  model Schedule {
    // 기존 필드들...

    // 전월 편차 저장 (원장 스케줄 세팅 시 Staff 테이블에서 복사)
    previousMonthFairness Json? // { "staffId1": { "total": 0.5, "night": -0.3, ... }, ... }
  }

 1. 편차는 제대로 계산되고 있습니다: 야간(0.15, -0.85), 주말(-0.40, 0.60) 등
  2. 하지만 Staff 테이블에 저장이 안되고 있습니다: 모두 0.00
  3. UI는 Staff 테이블에서 읽어옵니다: 그래서 모두 0.00으로 표시됨

  해결 방법: 배치 완료 후 (auto-assign 또는 weekly-assign 끝에) updateStaffFairnessScores를
  호출해서 Staff 테이블에 저장해야 합니다.


  만약 문제가 발생하면:
  # 이전 커밋으로 되돌리기
  git revert 28a0e23  # UI 컴포넌트 수정 취소
  git revert b7a93af  # 핵심 기능 수정 취소

  # 또는 특정 커밋으로 reset
  git reset --hard 4b3453f  # 동적화 이전 상태로

╭────────────────────────────────────────────────────────────────────────────╮
     │ 전체 수정 계획 (통합)                                                      │
     │                                                                            │
     │ 1. 주차 계산 로직 수정 (WeeklyPatternBuilder.tsx)                          │
     │                                                                            │
     │ 핵심 로직                                                                  │
     │                                                                            │
     │ - 마지막 주에 해당 월의 근무일이 하나라도 있으면 → 해당 월에서 배치        │
     │ - 마지막 주에 해당 월의 근무일이 없으면 → 다음 달에서 배치                 │
     │                                                                            │
     │ 수정 방법                                                                  │
     │                                                                            │
     │ 1. ClosedDaySettings 조회 추가                                             │
     │ 2. getWeeksInMonth() 함수에 휴무일 정보 전달                               │
     │ 3. 첫 주/마지막 주의 해당 월 날짜 중 근무일 존재 여부 확인                 │
     │ 4. 근무일이 없으면 해당 주 제외                                            │
     │                                                                            │
     │ ---                                                                        │
     │ 2. 연차 신청 기간 계산 로직 수정 (period/route.ts)                         │
     │                                                                            │
     │ 올바른 로직                                                                │
     │                                                                            │
     │ - 시작일 = StaffAssignment 최종일 + 1일                                    │
     │ - 종료일 = min(ScheduleDoctor 최종일, LeavePeriod.endDate)                 │
     │                                                                            │
     │ 수정 코드                                                                  │
     │                                                                            │
     │ // 시작일: StaffAssignment + 1일                                           │
     │ let actualStartDate = leavePeriod.startDate                                │
     │ if (lastStaffAssignment?.date) {                                           │
     │   const nextDay = new Date(lastStaffAssignment.date)                       │
     │   nextDay.setDate(nextDay.getDate() + 1)                                   │
     │   if (nextDay > actualStartDate) {                                         │
     │     actualStartDate = nextDay                                              │
     │   }                                                                        │
     │ }                                                                          │
     │                                                                            │
     │ // 종료일: min(ScheduleDoctor, LeavePeriod)                                │
     │ let actualEndDate = leavePeriod.endDate                                    │
     │ if (lastDoctorSchedule?.date && lastDoctorSchedule.date < actualEndDate) { │
     │   actualEndDate = lastDoctorSchedule.date                                  │
     │ }                                                                          │
     │                                                                            │
     │ ---                                                                        │
     │ 3. 이전/다음 달 배치 내용 표시 (UI 개선)                                   │
     │                                                                            │
     │ 해결 방안                                                                  │
     │                                                                            │
     │ - 구분선으로 영역 분리                                                     │
     │ - 색상으로 시각적 구분 (배경색)                                            │
     │ - 뱃지/레이블 추가 ("○월 배치")                                            │
     │                                                                            │
     │ 적용 대상 (우선순위 순)                                                    │
     │                                                                            │
     │ 1. 원장 스케줄 배치 > 스케줄 요약                                          │
     │ 2. 직원 스케줄 배치 > 원장 스케줄 확인                                     │
     │ 3. 직원 스케줄 배치 > 일별 슬롯 현황                                       │
     │ 4. 직원 스케줄 배치 > 연차/오프 확인                                       │
     │ 5. 자동배정 미리보기                                                       │
     │ 6. 배포 페이지                                                             │
     │                                                                            │
     │ 구현 방법                                                                  │
     │                                                                            │
     │ - API에서 해당 월 ±7일 추가 조회                                           │
     │ - 날짜에 "(○월 배치)" 레이블 추가                                          │
     │ - CSS로 배경색 구분                                                        │
     │                                                                            │
     │ ---                                                                        │
     │ 4. 연차/오프 신청 페이지 개선 (UX 개선)                                    │
     │                                                                            │
     │ 개선 방식                                                                  │
     │                                                                            │
     │ 달력에서 날짜 클릭                                                         │
     │ → Popover/드롭다운으로 [연차] [오프] 선택                                  │
     │ → 선택된 날짜에 배지 표시                                                  │
     │ → 다른 날짜 계속 선택                                                      │
     │ → 하단 [일괄 신청하기] 버튼으로 한번에 전송                                │
     │                                                                            │
     │ 구현 방법                                                                  │
     │                                                                            │
     │ 1. 선택 상태 관리: Map<날짜, {type: '연차'|'오프'}>                        │
     │ 2. 달력 셀 클릭 → Popover 표시                                             │
     │ 3. 선택된 항목 하단 리스트로 표시                                          │
     │ 4. 일괄 신청 API 호출                                                      │
     │                                                                            │
     │ 추가 개선                                                                  │
     │                                                                            │
     │ - 본인 구분의 슬롯 표시 (예: "고년차 1/2")                                 │
     │ - 연차 잔여 일수 체크 및 표시                                              │
     │ - 명확한 안내 메시지                                                       │
     │                                                                            │
     │ ---                                                                        │
     │ 5. 직원 관리 기능 수정 (중요)                                              │
     │                                                                            │
     │ 문제 1: 직원 카드에서 부서/구분 표시 안됨                                  │
     │                                                                            │
     │ - 대량등록: 표시됨 ✅                                                       │
     │ - 직원 카드: 빈칸 ❌                                                        │
     │ - 수정: 직원 카드 UI에 부서/구분 표시 및 수정 기능 추가                    │
     │                                                                            │
     │ 문제 2: 연차 일수 입력 필드 없음                                           │
     │                                                                            │
     │ - 수정: 직원 등록/수정 시 연차 일수 입력 필드 추가                         │
     │   - totalAnnualDays (연차 총 일수)                                         │
     │   - usedAnnualDays (사용한 연차) - 초기값 0                                │
     │                                                                            │
     │ 문제 3: 유연배치 설정이 저장 안됨                                          │
     │                                                                            │
     │ - 확인: Staff 테이블에 필드 존재 여부 체크                                 │
     │   - flexibleForCategories (유연 배치 가능 구분 목록)                       │
     │   - flexibilityPriority (우선순위)                                         │
     │ - 수정: UI에서 저장 로직 추가 또는 수정                                    │
     │                                                                            │
     │ ---                                                                        │
     │ 6. 구분별 비율 설정 기능 추가                                              │
     │                                                                            │
     │ 현재 상황                                                                  │
     │                                                                            │
     │ - 구분별 비율 설정이 없으면 → 직원 수 비율로 자동 계산                     │
     │ - 설정이 있으면 → 설정값 사용                                              │
     │                                                                            │
     │ 수정 사항                                                                  │
     │                                                                            │
     │ 1. 설정 페이지에 안내 문구 추가                                            │
     │ "구분별 비율을 설정하지 않으면 각 구분의 직원 수 비율로 자동 계산됩니다."  │
     │ 2. 비율 계산 로직 확인                                                     │
     │   - CategoryRatioSettings 테이블 확인                                      │
     │   - 없으면 직원 수 비율로 자동 계산하는 로직 추가                          │
     │   - 있으면 설정값 사용                                                     │
     │ 3. 동적 구분 목록 처리                                                     │
     │   - 모든 부서, 구분, 비율은 설정에서 동적으로 가져오기                     │
     │   - 하드코딩된 값 제거                                                     │
     │                                                                            │
     │ ---                                                                        │
     │ 7. 스키마 및 필드 확인 작업                                                │
     │                                                                            │
     │ 확인 사항                                                                  │
     │                                                                            │
     │ 1. Staff 테이블에 필요한 필드 존재 여부:                                   │
     │   - departmentName (부서)                                                  │
     │   - categoryName (구분)                                                    │
     │   - totalAnnualDays (연차 총 일수)                                         │
     │   - usedAnnualDays (사용 연차)                                             │
     │   - flexibleForCategories (유연 배치 가능 구분)                            │
     │   - flexibilityPriority (유연 배치 우선순위)                               │
     │ 2. CategoryRatioSettings 테이블 존재 여부                                  │
     │ 3. 필드가 없으면 마이그레이션 파일 생성                                    │
     │                                                                            │
     │ ---                                                                        │
     │ 작업 순서 (우선순위)                                                       │
     │                                                                            │
     │ Phase 1: 스키마 확인 및 수정 (필수)                                        │
     │                                                                            │
     │ 1. Staff 테이블 스키마 확인                                                │
     │ 2. 누락된 필드 추가 (마이그레이션)                                         │
     │ 3. CategoryRatioSettings 확인                                              │
     │                                                                            │
     │ Phase 2: 핵심 로직 수정                                                    │
     │                                                                            │
     │ 1. 주차 계산 로직 (WeeklyPatternBuilder)                                   │
     │ 2. 연차 신청 기간 계산 (period/route.ts)                                   │
     │ 3. 구분별 비율 자동 계산 로직                                              │
     │                                                                            │
     │ Phase 3: 직원 관리 UI 수정                                                 │
     │                                                                            │
     │ 1. 직원 카드 - 부서/구분 표시 및 수정                                      │
     │ 2. 연차 일수 입력 필드 추가                                                │
     │ 3. 유연배치 설정 UI 및 저장 로직                                           │
     │                                                                            │
     │ Phase 4: 연차/오프 신청 페이지 개선                                        │
     │                                                                            │
     │ 1. 다중 선택 기능 구현                                                     │
     │ 2. 구분별 슬롯 표시                                                        │
     │ 3. 연차 잔여 일수 체크                                                     │
     │                                                                            │
     │ Phase 5: 이전/다음 달 배치 표시 (단계적)                                   │
     │                                                                            │
     │ 1. 원장 스케줄 요약                                                        │
     │ 2. 직원 배치 화면                                                          │
     │ 3. 나머지 페이지들                                                         │
     │                                                                            │
     │ ---                                                                        │
     │ 예상 작업 시간                                                             │
     │                                                                            │
     │ - Phase 1: 1-2시간                                                         │
     │ - Phase 2: 2-3시간                                                         │
     │ - Phase 3: 3-4시간                                                         │
     │ - Phase 4: 2-3시간                                                         │
     │ - Phase 5: 6-8시간 (페이지별로 단계적)                                     │
     │                                                                            │
     │ 총 예상: 14-20시간   



 전체 TODO 리스트 (병렬 처리 가능하도록 구성)

 ✅ 스키마 확인 완료

 - Staff 테이블: departmentName, categoryName, flexibleForCategories, flexibilityPriority,
 totalAnnualDays, usedAnnualDays 모두 존재 ✅
 - CategoryRatioSettings 테이블 존재 ✅
 - 마이그레이션 불필요

 ---
 📋 Group A: 독립적인 백엔드 로직 수정 (병렬 가능)

 A1. 연차 신청 기간 계산 로직 수정

 파일: src/app/api/leave-apply/[token]/period/route.ts
 내용:
 // 잘못된 로직 제거
 // const lastScheduledDate = max(staff, doctor) ❌

 // 올바른 로직
 let actualStartDate = leavePeriod.startDate
 if (lastStaffAssignment?.date) {
   const nextDay = new Date(lastStaffAssignment.date)
   nextDay.setDate(nextDay.getDate() + 1)
   if (nextDay > actualStartDate) actualStartDate = nextDay
 }

 let actualEndDate = leavePeriod.endDate
 if (lastDoctorSchedule?.date && lastDoctorSchedule.date < actualEndDate) {
   actualEndDate = lastDoctorSchedule.date
 }
 의존성: 없음
 위험도: 낮음 (단순 계산 로직)

 ---
 A2. 구분별 비율 자동 계산 로직 추가

 파일: src/lib/services/category-slot-service.ts
 내용:
 1. calculateCategorySlots 함수 수정
 2. CategoryRatioSettings가 없으면 직원 수 비율로 자동 계산
 let ratios: CategoryRatios
 const ratioSettings = await prisma.categoryRatioSettings.findUnique({
   where: { clinicId }
 })

 if (!ratioSettings) {
   // 직원 수 기준 자동 계산
   const staffCounts = await prisma.staff.groupBy({
     by: ['categoryName'],
     where: { clinicId, isActive: true },
     _count: true
   })
   const totalStaff = staffCounts.reduce((sum, c) => sum + c._count, 0)
   ratios = {}
   staffCounts.forEach(c => {
     ratios[c.categoryName] = (c._count / totalStaff) * 100
   })
 } else {
   ratios = ratioSettings.ratios as CategoryRatios
 }
 의존성: 없음
 위험도: 중간 (기존 로직 변경)

 ---
 📋 Group B: 주차 계산 로직 (독립적, 복잡)

 B1. 주차 계산 로직 수정

 파일: src/components/wizard/WeeklyPatternBuilder.tsx
 내용:
 1. ClosedDaySettings 조회 추가
 2. getWeeksInMonth() 함수 수정
   - 휴무일 정보를 파라미터로 받도록 변경
   - 첫 주/마지막 주의 해당 월 날짜가 모두 휴무인지 확인
   - 모두 휴무면 해당 주 제외

 async function getWeeksInMonthWithClosedDays(
   monthStart: Date,
   monthEnd: Date,
   clinicId: string
 ) {
   // ClosedDaySettings 조회
   const closedSettings = await fetch(`/api/settings/closed-days?clinicId=${clinicId}`)
   const closedDays = closedSettings.regularDays // Sunday 등

   const allWeeks = getWeeksInMonth(monthStart, monthEnd)

   // 필터링: 첫 주와 마지막 주 확인
   return allWeeks.filter((week, index) => {
     const isFirstWeek = index === 0
     const isLastWeek = index === allWeeks.length - 1

     if (!isFirstWeek && !isLastWeek) return true

     // 해당 월에 속한 날짜들 중 근무일이 있는지 확인
     const datesInMonth = getDatesBetween(week.start, week.end)
       .filter(d => d.getMonth() + 1 === monthStart.getMonth() + 1)

     const hasWorkday = datesInMonth.some(d => !isClosedDay(d, closedDays))
     return hasWorkday
   })
 }
 의존성: ClosedDaySettings API 필요
 위험도: 높음 (핵심 배치 로직)

 ---
 📋 Group C: 직원 관리 UI 수정 (병렬 가능)

 C1. 직원 카드 - 부서/구분 표시 및 수정

 파일: src/components/settings/StaffCard.tsx (추정)
 내용:
 1. 부서명, 구분명 필드 표시
 2. 수정 가능하도록 input 또는 select 추가
 3. 저장 시 API 호출에 포함

 의존성: 없음
 위험도: 낮음 (UI만 수정)

 ---
 C2. 직원 등록/수정 - 연차 일수 입력 필드 추가

 파일: src/components/settings/StaffForm.tsx (추정)
 내용:
 1. totalAnnualDays 입력 필드 추가 (기본값 15)
 2. usedAnnualDays 표시 (수정 불가, 초기값 0)
 3. 저장 시 API 호출에 포함

 의존성: 없음
 위험도: 낮음 (UI만 수정)

 ---
 C3. 직원 등록/수정 - 유연배치 설정 UI 추가

 파일: src/components/settings/StaffForm.tsx (추정)
 내용:
 1. flexibleForCategories 다중 선택 (구분 목록에서 선택)
 2. flexibilityPriority 숫자 입력 (0-10)
 3. 저장 시 API 호출에 포함 확인

 의존성: 없음
 위험도: 낮음 (UI만 수정)

 ---
 📋 Group D: 설정 페이지 개선 (독립적)

 D1. 구분별 비율 설정 페이지에 안내 문구 추가

 파일: 구분별 비율 설정 페이지 (탐색 필요)
 내용:
 "📌 구분별 비율을 설정하지 않으면 각 구분의 직원 수 비율로 자동 계산됩니다."
 의존성: 없음
 위험도: 낮음 (텍스트 추가)

 ---
 📋 Group E: 연차/오프 신청 페이지 개선 (복잡, 순차 작업)

 E1. 다중 선택 상태 관리 구조 변경

 파일: src/app/(public)/leave-apply/[token]/page.tsx
 내용:
 1. 상태 변경:
 // 기존
 const [selectedDate, setSelectedDate] = useState<Date>()
 const [selectedType, setSelectedType] = useState<LeaveType>('ANNUAL')

 // 변경
 const [selections, setSelections] = useState<Map<string, LeaveType>>(new Map())
 2. 선택 추가/제거 함수 작성

 의존성: 없음위험도: 중간 (상태 구조 변경)

 ---
 E2. DateSelector 컴포넌트 수정 - 다중 선택 지원

 파일: src/components/public-apply/DateSelector.tsx
 내용:
 1. 날짜 클릭 시 Popover 표시
 2. [연차] [오프] 버튼 표시
 3. 선택 시 상위 컴포넌트에 전달
 4. 선택된 날짜에 배지 표시

 의존성: E1 완료 후
 위험도: 중간 (UI 로직 변경)

 ---
 E3. 선택 항목 리스트 UI 추가

 파일: src/app/(public)/leave-apply/[token]/page.tsx
 내용:
 1. 선택된 항목들을 리스트로 표시
 2. 각 항목에 삭제 버튼
 3. 본인 구분의 슬롯 정보 표시
 4. 연차 잔여 일수 체크 및 경고

 의존성: E1, E2 완료 후
 위험도: 낮음 (표시 UI)

 ---
 E4. 일괄 신청 API 호출 로직

 파일: src/app/(public)/leave-apply/[token]/page.tsx
 내용:
 1. 선택된 모든 항목을 순회
 2. 각각 신청 API 호출 (Promise.all 또는 순차)
 3. 결과 수집 및 사용자에게 피드백
 4. 성공/실패 건수 표시

 의존성: E1, E2, E3 완료 후
 위험도: 중간 (에러 핸들링 필요)

 ---
 E5. 구분별 슬롯 표시 개선

 파일: src/components/public-apply/DateSelector.tsx
 내용:
 1. 전체 슬롯 대신 본인 구분 슬롯 표시
 2. authData에서 categoryName 가져오기
 3. status API 응답에 categorySlots 포함 확인
 4. 표시: "고년차 1/2" 형태

 의존성: E1 완료 후 (병렬 가능)
 위험도: 낮음 (표시 개선)

 ---
 📋 Group F: 이전/다음 달 배치 표시 (단계적, 후순위)

 F1. 원장 스케줄 요약 - 이전/다음 달 배치 표시

 파일: 원장 스케줄 요약 페이지 (탐색 필요)
 내용:
 1. API에서 해당 월 ±7일 조회
 2. 이전 달 배치: 파란색 배경 + "(○월 배치)" 레이블
 3. 다음 달 배치: 노란색 배경 + "(○월 배치)" 레이블
 4. 구분선으로 영역 분리

 의존성: Group A, B 완료 후
 위험도: 중간 (표시 로직)

 F2~F6. 나머지 페이지들 (생략, F1과 동일 패턴)

 - 직원 스케줄 배치 > 원장 스케줄 확인
 - 직원 스케줄 배치 > 일별 슬롯 현황
 - 직원 스케줄 배치 > 연차/오프 확인
 - 자동배정 미리보기
 - 배포 페이지

 ---
 🔄 병렬 처리 계획

 Phase 1 (병렬 실행 가능)

 - ✅ A1: 기간 계산 로직 수정
 - ✅ A2: 비율 자동 계산 로직
 - ✅ C1: 직원 카드 UI 수정
 - ✅ C2: 연차 일수 필드 추가
 - ✅ C3: 유연배치 UI 추가
 - ✅ D1: 안내 문구 추가

 Phase 2 (B1 단독, 복잡)

 - ⚠️ B1: 주차 계산 로직 (주의 깊게 테스트)

 Phase 3 (순차 실행)

 - E1 → E2 → E3 → E4
 - E5 (E1 완료 후 병렬 가능)

 Phase 4 (단계적, 후순위)

 - F1 → 테스트 → F2 → F3 → ... (하나씩)

 ---
 ⚠️ 주의사항 및 검증 포인트

 1. A2 (비율 자동 계산) 검증

 - CategoryRatioSettings가 없을 때 정상 동작
 - categoryName이 null인 직원 처리
 - 비율 합이 100%가 되는지 확인

 2. B1 (주차 계산) 검증

 - 11월 29-30일 휴무 → 6주차 제외 ✅
 - 1월 31일 근무 → 5주차 포함 (2/1까지) ✅
 - 다양한 월/년도 테스트 필요

 3. E1~E4 (다중 선택) 검증

 - 연차 잔여 일수 부족 시 에러 처리
 - 구분별 슬롯 부족 시 보류 처리 확인
 - API 호출 실패 시 롤백 불가 → 부분 성공 처리

 4. F1~F6 (이전/다음 달 표시) 검증

 - 날짜 범위 계산 오류 없는지
 - 월 경계 처리 (12월 → 1월)
 - 배포 정보 누락 없는지

 ---
 📊 예상 작업 시간

 | Phase | 작업                     | 예상 시간   | 위험도   |
 |-------|------------------------|---------|-------|
 | 1     | A1, A2, C1-C3, D1 (병렬) | 3-4시간   | 낮음-중간 |
 | 2     | B1 (주차 계산)             | 2-3시간   | 높음    |
 | 3     | E1-E5 (순차)             | 3-4시간   | 중간    |
 | 4     | F1-F6 (단계적)            | 5-7시간   | 중간    |
 | 총계    |                        | 13-18시간 |       |

 ---
 ✅ 안정성 보장 방안

 1. Phase 1 작업은 모두 독립적 → 안전하게 병렬 실행
 2. B1은 단독 작업 → 충분한 테스트 후 다음 단계
 3. E 그룹은 순차 작업 → 의존성 순서대로 진행
 4. F 그룹은 단계적 → 하나씩 완료하고 테스트 후 다음
 5. 각 작업마다 로컬 테스트 → 서버 재시작으로 검증
