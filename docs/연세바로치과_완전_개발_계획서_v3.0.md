# ì—°ì„¸ë°”ë¡œì¹˜ê³¼ ìŠ¤ì¼€ì¤„ ê´€ë¦¬ ì‹œìŠ¤í…œ - ì™„ì „ ê°œë°œ ê³„íšì„œ v3.0

**ì‘ì„±ì¼**: 2025-10-22  
**ë²„ì „**: 3.0 (ìµœì¢… í†µí•©)  
**ì‘ì„±ì**: í”„ë¡œì íŠ¸ ë¶„ì„íŒ€  
**ë¬¸ì„œ ìœ í˜•**: ê°œë°œììš© í†µí•© ë¬¸ì„œ

---

## ğŸ“‘ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ì „ì²´ ë¶„ì„](#1-í”„ë¡œì íŠ¸-ì „ì²´-ë¶„ì„)
2. [ëˆ„ë½ëœ ê¸°ëŠ¥ ë° í˜ì´ì§€ íŒŒì•…](#2-ëˆ„ë½ëœ-ê¸°ëŠ¥-ë°-í˜ì´ì§€-íŒŒì•…)
3. [ì „ì²´ íŒŒì¼ êµ¬ì¡° ë° ì„¤ê³„](#3-ì „ì²´-íŒŒì¼-êµ¬ì¡°-ë°-ì„¤ê³„)
4. [ë°ì´í„° íë¦„ ë° ë¡œì§ ë¶„ì„](#4-ë°ì´í„°-íë¦„-ë°-ë¡œì§-ë¶„ì„)
5. [ê°œë°œ ë‹¨ê³„ë³„ ì‹¤í–‰ ê³„íš](#5-ê°œë°œ-ë‹¨ê³„ë³„-ì‹¤í–‰-ê³„íš)
6. [Prisma ìŠ¤í‚¤ë§ˆ ì„¤ê³„](#6-prisma-ìŠ¤í‚¤ë§ˆ-ì„¤ê³„)
7. [í•µì‹¬ API ëª…ì„¸](#7-í•µì‹¬-api-ëª…ì„¸)
8. [êµ¬í˜„ ìš°ì„ ìˆœìœ„ë³„ ìƒì„¸ ê°€ì´ë“œ](#8-êµ¬í˜„-ìš°ì„ ìˆœìœ„ë³„-ìƒì„¸-ê°€ì´ë“œ)

---

## 1. í”„ë¡œì íŠ¸ ì „ì²´ ë¶„ì„

### 1.1 ë¬¸ì„œ ë¶„ì„ ìš”ì•½

| ë¬¸ì„œëª… | ì£¼ìš” ë‚´ìš© | ì™„ì„±ë„ | ìƒíƒœ |
|--------|-----------|--------|------|
| **ê¸°ëŠ¥ëª…ì„¸ì„œ Part1** | ê¸°ë³¸ ì›Œí¬í”Œë¡œìš°, í•µì‹¬ ê¸°ëŠ¥, ë°ì´í„° êµ¬ì¡° | 90% | âœ… ì™„ë£Œ |
| **ê¸°ëŠ¥ëª…ì„¸ì„œ Part2** | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ì•Œê³ ë¦¬ì¦˜, ë³´ì•ˆ | 85% | âœ… ì™„ë£Œ |
| **í™”ë©´êµ¬ì„± ë° ì„¤ê³„** | UI/UX, ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°, ë¼ìš°íŒ… | 80% | âœ… ì™„ë£Œ |
| **ì¶”ê°€ ë° ìˆ˜ì • ì‚¬í•­** | ë³€ê²½ì‚¬í•­, ìƒˆ ê¸°ëŠ¥, ì œê±° ê¸°ëŠ¥ | 100% | âœ… ì™„ë£Œ |

### 1.2 í”„ë¡œì íŠ¸ ëª©ì 

ì—°ì„¸ë°”ë¡œì¹˜ê³¼ì˜ ì›”ê°„ ì§ì› ê·¼ë¬´ ìŠ¤ì¼€ì¤„ì„ ìë™í™”í•˜ì—¬:
- **ì‹œê°„ ì ˆê°**: 3ì‹œê°„ â†’ 15ë¶„ (85% ê°ì†Œ)
- **í˜•í‰ì„± ë³´ì¥**: ì•¼ê°„/ì£¼ë§ ê·¼ë¬´ì˜ ê³µì •í•œ ë°°ë¶„
- **íš¨ìœ¨ì„± í–¥ìƒ**: ì§ì› ììœ¨ ì‹ ì²­, ì‹¤ì‹œê°„ ì•Œë¦¼
- **í™•ì¥ì„±**: ë‹¤ë¥¸ ì¹˜ê³¼/ì˜ì›ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥

### 1.3 ê¸°ìˆ  ìŠ¤íƒ

#### í”„ë¡ íŠ¸ì—”ë“œ
```yaml
Framework: Next.js 14 (App Router)
Language: TypeScript 5.x
UI Library: Tailwind CSS 3.x, shadcn/ui
State Management: Zustand, React Query
Charts: Recharts
Date Handling: date-fns
Validation: Zod
```

#### ë°±ì—”ë“œ
```yaml
Runtime: Node.js 20.x
Framework: Next.js API Routes
ORM: Prisma 5.x
Database: PostgreSQL 16
Authentication: NextAuth.js 4.x
File Storage: AWS S3 (ë°±ì—…ìš©)
```

#### ë°°í¬
```yaml
Hosting: Vercel
Database: Supabase (PostgreSQL)
Storage: AWS S3
Monitoring: Sentry
```

### 1.4 í•µì‹¬ ê°œì„  ì‚¬í•­

#### â­ ìƒˆë¡œ ì¶”ê°€í•  í•µì‹¬ ê¸°ëŠ¥

```typescript
1. ì›ì¥ ìš”ì¼ë³„ íŒ¨í„´ ì €ì¥ ì‹œìŠ¤í…œ
   ìœ„ì¹˜: âš™ï¸ ì„¤ì • > ì›ì¥ ê´€ë¦¬ > ìš”ì¼ë³„ íŒ¨í„´
   ëª©ì : í•œ ë²ˆ ì„¤ì •ìœ¼ë¡œ ë§¤ë‹¬ ì¬ì‚¬ìš©
   íš¨ê³¼: ì›ì¥ ìŠ¤ì¼€ì¤„ ì…ë ¥ ì‹œê°„ 95% ë‹¨ì¶•
   
2. ì—°ì°¨ ììœ¨ ì‹ ì²­ ì‹œìŠ¤í…œ (ìµœìš°ì„  ê¸°ëŠ¥)
   - ì‹ ì²­ ë§í¬ ìƒì„± (ê´€ë¦¬ì)
   - ì§ì›ìš© ì‹ ì²­ í˜ì´ì§€ (ë¡œê·¸ì¸ ë¶ˆí•„ìš”)
   - ì‹¤ì‹œê°„ ìŠ¬ë¡¯ ê´€ë¦¬ (ë™ì‹œì„± ì œì–´)
   - ê´€ë¦¬ì í™•ì • ê¸°ëŠ¥
   íš¨ê³¼: ê´€ë¦¬ìê°€ ì—°ì°¨ ìˆ˜ì§‘í•˜ëŸ¬ ëŒì•„ë‹¤ë‹ˆì§€ ì•ŠìŒ
   
3. ì—°ì°¨ê´€ë¦¬ ì „ìš© í˜ì´ì§€
   - ëŒ€ì‹œë³´ë“œ (ì „ì²´ í˜„í™©)
   - ë‹¬ë ¥ë·° (ë‚ ì§œë³„ ì‹ ì²­ í˜„í™©)
   - ëª©ë¡ë·° (ì‹ ì²­ ëª©ë¡)
   - ì§ì›ë³„ë·° (ê°œì¸ë³„ ì‹ ì²­ ë‚´ì—­)
   
4. ì›”ê°„/ì£¼ê°„ ìë™ ë°°ì¹˜
   - ì›”ê°„ ì¼ê´„ ë°°ì¹˜ (30ì¼ í•œë²ˆì—)
   - ì£¼ê°„ ë¶€ë¶„ ë°°ì¹˜
   - ìŠ¤ë§ˆíŠ¸ ë°°ì¹˜ (ê¸°ì¡´ ìœ ì§€ + í•„ìš”í•œ ê²ƒë§Œ ë³€ê²½)
   íš¨ê³¼: ë‚ ì§œë³„ ì‘ì—… â†’ ì›”ê°„ ì¼ê´„ ì‘ì—…ìœ¼ë¡œ ì „í™˜
   
5. ì•Œë¦¼ ì„¼í„°
   - í”„ë¡œê·¸ë¨ ë‚´ ì‹¤ì‹œê°„ ì•Œë¦¼
   - ì—°ì°¨ ì‹ ì²­ ì•Œë¦¼
   - ë§ˆê° ì„ë°• ì•Œë¦¼
   - ë°°ì¹˜ ì™„ë£Œ ì•Œë¦¼
   
6. Web Share API ì—°ë™
   - ëª¨ë°”ì¼ì—ì„œ ì¹´í†¡/ë¬¸ìë¡œ ì‰½ê²Œ ê³µìœ 
   - ë³„ë„ API ë“±ë¡ ë¶ˆí•„ìš”
```

#### âŒ ì œê±°í•  ê¸°ëŠ¥

```typescript
1. ì—°ì°¨ ì…ë ¥ ëª¨ë“œ (ë‹¬ë ¥ ë“œë˜ê·¸)
   ì œê±° ì´ìœ : ììœ¨ ì‹ ì²­ ì‹œìŠ¤í…œìœ¼ë¡œ ëŒ€ì²´
   
2. ì—°ì°¨-íœ´ë¬´ ë¶™ì´ê¸° ì„¤ì •
   ì œê±° ì´ìœ : ë„ˆë¬´ ë³µì¡, ì‹¤ì œ ì‚¬ìš© ë¹ˆë„ ë‚®ìŒ
   
3. ì—°ì† íœ´ë¬´ ì„¤ì •
   ì œê±° ì´ìœ : ë¶ˆí•„ìš”í•œ ì œì•½
   
4. ì´ë©”ì¼ ì•Œë¦¼
   ì œê±° ì´ìœ : í”„ë¡œê·¸ë¨ ë‚´ ì•Œë¦¼ìœ¼ë¡œ ì¶©ë¶„
   
5. ë³µì¡í•œ íŒ¨í„´ ë¶„ì„ í™”ë©´
   ì œê±° ì´ìœ : ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê¸°ëŠ¥
```

---

## 2. ëˆ„ë½ëœ ê¸°ëŠ¥ ë° í˜ì´ì§€ íŒŒì•…

### 2.1 âœ… ê¸°ì¡´ ë¬¸ì„œì— ìˆëŠ” í˜ì´ì§€

```
âœ… /login - ë¡œê·¸ì¸
âœ… /setup - ìµœì´ˆ ì„¤ì •
âœ… /calendar - ë‹¬ë ¥ë·° (ë©”ì¸)
âœ… /statistics - í†µê³„
âœ… /settings/* - ì„¤ì • (ì§ì›, ì›ì¥, ê·œì¹™ ë“±)
âœ… /logs - í™œë™ ë¡œê·¸
```

### 2.2 â­ ì¶”ê°€í•´ì•¼ í•  í˜ì´ì§€ (ëˆ„ë½ë¨)

#### 2.2.1 ì—°ì°¨ê´€ë¦¬ í˜ì´ì§€êµ° (ì‹ ê·œ)

```
ğŸ“ src/app/(dashboard)/leave-management/
â”œâ”€â”€ ğŸ“„ page.tsx                    // ì—°ì°¨ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ â­
â”‚   â””â”€â”€ í˜„í™© ìš”ì•½, ì‹ ì²­ ë§í¬ ìƒì„±, í†µê³„
â”‚
â”œâ”€â”€ ğŸ“ calendar-view/
â”‚   â””â”€â”€ ğŸ“„ page.tsx                // ì—°ì°¨ ë‹¬ë ¥ë·° â­
â”‚       â””â”€â”€ ë‚ ì§œë³„ ì‹ ì²­ í˜„í™© ì‹œê°í™”
â”‚
â”œâ”€â”€ ğŸ“ list-view/
â”‚   â””â”€â”€ ğŸ“„ page.tsx                // ì—°ì°¨ ëª©ë¡ë·° â­
â”‚       â””â”€â”€ ì „ì²´ ì‹ ì²­ ëª©ë¡ (í•„í„°/ê²€ìƒ‰)
â”‚
â”œâ”€â”€ ğŸ“ staff-view/
â”‚   â””â”€â”€ ğŸ“„ page.tsx                // ì—°ì°¨ ì§ì›ë³„ë·° â­
â”‚       â””â”€â”€ ê°œì¸ë³„ ì‹ ì²­ ë‚´ì—­
â”‚
â””â”€â”€ ğŸ“ period-setup/
    â””â”€â”€ ğŸ“„ page.tsx                // ì‹ ì²­ ê¸°ê°„ ì„¤ì • â­
        â””â”€â”€ ë§í¬ ìƒì„±, ìŠ¬ë¡¯ ì„¤ì •, ê³µìœ 
```

#### 2.2.2 ì§ì›ìš© ì—°ì°¨ ì‹ ì²­ í˜ì´ì§€ (ì™¸ë¶€ ì ‘ê·¼)

```
ğŸ“ src/app/(public)/leave-apply/[token]/
â”œâ”€â”€ ğŸ“„ page.tsx            // ì—°ì°¨ ì‹ ì²­ ë©”ì¸ í˜ì´ì§€ â­
â”‚   â”œâ”€â”€ ì‹¤ì‹œê°„ ìŠ¬ë¡¯ í‘œì‹œ
â”‚   â”œâ”€â”€ ë‚ ì§œ ì„ íƒ
â”‚   â”œâ”€â”€ ìœ í˜• ì„ íƒ (ì—°ì°¨/ì˜¤í”„/ë°˜ì°¨)
â”‚   â””â”€â”€ ì‹ ì²­ ì œì¶œ
â”‚
â”œâ”€â”€ ğŸ“„ layout.tsx          // ê³µê°œ ë ˆì´ì•„ì›ƒ
â”‚   â””â”€â”€ ë¡œê·¸ì¸ ë¶ˆí•„ìš” ì„¤ì •
â”‚
â””â”€â”€ ğŸ“ success/
    â””â”€â”€ ğŸ“„ page.tsx        // ì‹ ì²­ ì™„ë£Œ í˜ì´ì§€
        â””â”€â”€ ì‹ ì²­ ë‚´ì—­ í™•ì¸
```

#### 2.2.3 ìŠ¤ì¼€ì¤„ í™•ì¸ í˜ì´ì§€ (ì™¸ë¶€ ì ‘ê·¼)

```
ğŸ“ src/app/(public)/schedule-view/[token]/
â”œâ”€â”€ ğŸ“„ page.tsx            // ìŠ¤ì¼€ì¤„ ì¡°íšŒ í˜ì´ì§€ â­
â”‚   â”œâ”€â”€ ê°„ë‹¨ ì¸ì¦ (ì´ë¦„ + ìƒë…„ì›”ì¼)
â”‚   â”œâ”€â”€ ê°œì¸ ìŠ¤ì¼€ì¤„ ì¡°íšŒ
â”‚   â””â”€â”€ Excel/PDF ë‹¤ìš´ë¡œë“œ
â”‚
â””â”€â”€ ğŸ“„ auth.tsx            // ê°„ë‹¨ ì¸ì¦ ì»´í¬ë„ŒíŠ¸
```

#### 2.2.4 ì•Œë¦¼ ì„¼í„°

```
ğŸ“ src/app/(dashboard)/notifications/
â””â”€â”€ ğŸ“„ page.tsx            // ì•Œë¦¼ ì„¼í„° ì „ì²´ë·° â­
    â”œâ”€â”€ ì „ì²´ ì•Œë¦¼ ëª©ë¡
    â”œâ”€â”€ í•„í„° (ì½ìŒ/ì•ˆì½ìŒ)
    â””â”€â”€ ì¼ê´„ ì½ìŒ ì²˜ë¦¬
```

#### 2.2.5 ì›ì¥ íŒ¨í„´ ì„¤ì • í˜ì´ì§€

```
ğŸ“ src/app/(dashboard)/settings/doctors/pattern/
â””â”€â”€ ğŸ“„ page.tsx            // ìš”ì¼ë³„ íŒ¨í„´ ì„¤ì • â­
    â”œâ”€â”€ ìš”ì¼ë³„ ì›ì¥ ì¡°í•© ì €ì¥
    â”œâ”€â”€ ì•¼ê°„ ì§„ë£Œ ì—¬ë¶€
    â””â”€â”€ íŒ¨í„´ ë¯¸ë¦¬ë³´ê¸°
```

### 2.3 â­ ì¶”ê°€í•´ì•¼ í•  ì»´í¬ë„ŒíŠ¸

```typescript
ğŸ“ src/components/

â”œâ”€â”€ ğŸ“ leave-management/          // ì—°ì°¨ê´€ë¦¬ ì „ìš© â­
â”‚   â”œâ”€â”€ ğŸ“„ Dashboard.tsx          // ëŒ€ì‹œë³´ë“œ ë©”ì¸
â”‚   â”œâ”€â”€ ğŸ“„ CalendarView.tsx       // ë‹¬ë ¥ í˜•íƒœ
â”‚   â”œâ”€â”€ ğŸ“„ ListView.tsx           // ëª©ë¡ í˜•íƒœ
â”‚   â”œâ”€â”€ ğŸ“„ StaffView.tsx          // ì§ì›ë³„ ë·°
â”‚   â”œâ”€â”€ ğŸ“„ PeriodSetup.tsx        // ì‹ ì²­ ê¸°ê°„ ì„¤ì •
â”‚   â”œâ”€â”€ ğŸ“„ ApplicationCard.tsx    // ì‹ ì²­ ì¹´ë“œ
â”‚   â”œâ”€â”€ ğŸ“„ SlotStatus.tsx         // ìŠ¬ë¡¯ í˜„í™©
â”‚   â””â”€â”€ ğŸ“„ ConfirmModal.tsx       // í™•ì • ëª¨ë‹¬
â”‚
â”œâ”€â”€ ğŸ“ public-apply/              // ì§ì› ì‹ ì²­ìš© â­
â”‚   â”œâ”€â”€ ğŸ“„ DateSelector.tsx       // ë‚ ì§œ ì„ íƒ (ìº˜ë¦°ë”)
â”‚   â”œâ”€â”€ ğŸ“„ TypeSelector.tsx       // ìœ í˜• ì„ íƒ (ì—°ì°¨/ì˜¤í”„)
â”‚   â”œâ”€â”€ ğŸ“„ RealTimeStatus.tsx     // ì‹¤ì‹œê°„ ìŠ¬ë¡¯ í˜„í™©
â”‚   â”œâ”€â”€ ğŸ“„ ApplicationForm.tsx    // ì‹ ì²­ í¼
â”‚   â”œâ”€â”€ ğŸ“„ SuccessMessage.tsx     // ì™„ë£Œ ë©”ì‹œì§€
â”‚   â””â”€â”€ ğŸ“„ ConfirmationModal.tsx  // í™•ì¸ ëª¨ë‹¬
â”‚
â”œâ”€â”€ ğŸ“ notifications/              // ì•Œë¦¼ â­
â”‚   â”œâ”€â”€ ğŸ“„ NotificationBell.tsx   // í—¤ë” ë²¨ ì•„ì´ì½˜
â”‚   â”œâ”€â”€ ğŸ“„ NotificationPanel.tsx  // ë“œë¡­ë‹¤ìš´ íŒ¨ë„
â”‚   â”œâ”€â”€ ğŸ“„ NotificationItem.tsx   // ê°œë³„ ì•Œë¦¼
â”‚   â”œâ”€â”€ ğŸ“„ NotificationBadge.tsx  // ì½ì§€ ì•ŠìŒ ë°°ì§€
â”‚   â””â”€â”€ ğŸ“„ NotificationFilter.tsx // í•„í„° (íƒ€ì…ë³„)
â”‚
â””â”€â”€ ğŸ“ pattern/                   // ì›ì¥ íŒ¨í„´ â­
    â”œâ”€â”€ ğŸ“„ DayPatternEditor.tsx   // ìš”ì¼ë³„ í¸ì§‘ê¸°
    â”œâ”€â”€ ğŸ“„ PatternPreview.tsx     // ë¯¸ë¦¬ë³´ê¸°
    â”œâ”€â”€ ğŸ“„ PatternApplyButton.tsx // ì ìš© ë²„íŠ¼
    â””â”€â”€ ğŸ“„ PatternList.tsx        // ì €ì¥ëœ íŒ¨í„´ ëª©ë¡
```

### 2.4 â­ ì¶”ê°€í•´ì•¼ í•  API ì—”ë“œí¬ì¸íŠ¸

```typescript
ğŸ“ src/app/api/

â”œâ”€â”€ ğŸ“ doctor-pattern/            // ì›ì¥ íŒ¨í„´ â­
â”‚   â”œâ”€â”€ ğŸ“„ route.ts               // GET (ì¡°íšŒ), POST (ìƒì„±)
â”‚   â”œâ”€â”€ ğŸ“ [id]/
â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts           // PUT (ìˆ˜ì •), DELETE (ì‚­ì œ)
â”‚   â””â”€â”€ ğŸ“ apply/
â”‚       â””â”€â”€ ğŸ“„ route.ts           // POST (ë‹¬ë ¥ì— íŒ¨í„´ ì ìš©)
â”‚
â”œâ”€â”€ ğŸ“ leave-apply/               // ì§ì› ì‹ ì²­ (ê³µê°œ) â­
â”‚   â””â”€â”€ ğŸ“ [token]/
â”‚       â”œâ”€â”€ ğŸ“„ route.ts           // GET (í˜ì´ì§€ ë°ì´í„°)
â”‚       â”œâ”€â”€ ğŸ“ submit/
â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts       // POST (ì‹ ì²­ ì œì¶œ)
â”‚       â”œâ”€â”€ ğŸ“ status/
â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts       // GET (ì‹¤ì‹œê°„ ìŠ¬ë¡¯)
â”‚       â””â”€â”€ ğŸ“ my-application/
â”‚           â””â”€â”€ ğŸ“„ route.ts       // GET (ë‚´ ì‹ ì²­ ë‚´ì—­)
â”‚
â”œâ”€â”€ ğŸ“ leave-management/          // ì—°ì°¨ ê´€ë¦¬ (ê´€ë¦¬ì) â­
â”‚   â”œâ”€â”€ ğŸ“„ route.ts               // GET (ì „ì²´ í˜„í™©)
â”‚   â”œâ”€â”€ ğŸ“ period/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ route.ts           // POST (ê¸°ê°„ ìƒì„±)
â”‚   â”‚   â””â”€â”€ ğŸ“ [id]/
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ route.ts       // PUT (ìˆ˜ì •), DELETE (ì‚­ì œ)
â”‚   â”‚       â”œâ”€â”€ ğŸ“ confirm/
â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts   // POST (í™•ì •) â­
â”‚   â”‚       â””â”€â”€ ğŸ“ reopen/
â”‚   â”‚           â””â”€â”€ ğŸ“„ route.ts   // POST (ì¬ì˜¤í”ˆ)
â”‚   â”œâ”€â”€ ğŸ“ calendar-view/
â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts           // GET (ë‹¬ë ¥ ë°ì´í„°)
â”‚   â”œâ”€â”€ ğŸ“ list-view/
â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts           // GET (ëª©ë¡ ë°ì´í„°)
â”‚   â”œâ”€â”€ ğŸ“ staff-view/
â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts           // GET (ì§ì›ë³„ ë°ì´í„°)
â”‚   â””â”€â”€ ğŸ“ [id]/
â”‚       â””â”€â”€ ğŸ“„ route.ts           // PUT (ìˆ˜ì •), DELETE (ì‚­ì œ)
â”‚
â”œâ”€â”€ ğŸ“ auto-assign/
â”‚   â”œâ”€â”€ ğŸ“ monthly/               // ì›”ê°„ ë°°ì¹˜ â­
â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts           // POST
â”‚   â”œâ”€â”€ ğŸ“ weekly/                // ì£¼ê°„ ë°°ì¹˜ â­
â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts           // POST
â”‚   â””â”€â”€ ğŸ“ daily/                 // ì¼ë³„ ë°°ì¹˜
â”‚       â””â”€â”€ ğŸ“„ route.ts           // POST
â”‚
â””â”€â”€ ğŸ“ notifications/             // ì•Œë¦¼ â­
    â”œâ”€â”€ ğŸ“„ route.ts               // GET (ëª©ë¡)
    â”œâ”€â”€ ğŸ“ unread/
    â”‚   â””â”€â”€ ğŸ“„ route.ts           // GET (ì•ˆ ì½ì€ ê²ƒë§Œ)
    â”œâ”€â”€ ğŸ“ [id]/
    â”‚   â”œâ”€â”€ ğŸ“ read/
    â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts       // PUT (ì½ìŒ ì²˜ë¦¬)
    â”‚   â””â”€â”€ ğŸ“„ route.ts           // DELETE (ì‚­ì œ)
    â””â”€â”€ ğŸ“ read-all/
        â””â”€â”€ ğŸ“„ route.ts           // PUT (ëª¨ë‘ ì½ìŒ)
```

---

## 3. ì „ì²´ íŒŒì¼ êµ¬ì¡° ë° ì„¤ê³„

### 3.1 ì™„ì „í•œ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
yonsei-dental-schedule/
â”œâ”€â”€ ğŸ“„ package.json
â”œâ”€â”€ ğŸ“„ next.config.js
â”œâ”€â”€ ğŸ“„ tsconfig.json
â”œâ”€â”€ ğŸ“„ tailwind.config.ts
â”œâ”€â”€ ğŸ“„ .env.local
â”œâ”€â”€ ğŸ“„ .gitignore
â”œâ”€â”€ ğŸ“„ README.md
â”‚
â”œâ”€â”€ ğŸ“ prisma/
â”‚   â”œâ”€â”€ ğŸ“„ schema.prisma          â­ ì—…ë°ì´íŠ¸ í•„ìš” (ì‹ ê·œ í…Œì´ë¸” 5ê°œ)
â”‚   â”œâ”€â”€ ğŸ“„ seed.ts
â”‚   â””â”€â”€ ğŸ“ migrations/
â”‚
â”œâ”€â”€ ğŸ“ public/
â”‚   â”œâ”€â”€ ğŸ“„ logo.png
â”‚   â”œâ”€â”€ ğŸ“„ icon-192.png
â”‚   â”œâ”€â”€ ğŸ“„ icon-512.png
â”‚   â””â”€â”€ ğŸ“„ manifest.json
â”‚
â””â”€â”€ ğŸ“ src/
    â”œâ”€â”€ ğŸ“ app/
    â”‚   â”œâ”€â”€ ğŸ“„ layout.tsx
    â”‚   â”œâ”€â”€ ğŸ“„ page.tsx
    â”‚   â”œâ”€â”€ ğŸ“„ globals.css
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“ (auth)/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“ login/
    â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â””â”€â”€ ğŸ“ setup/
    â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“ (dashboard)/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ layout.tsx
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â”€ ğŸ“ calendar/
    â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â”€ ğŸ“ leave-management/     â­ ì‹ ê·œ ë””ë ‰í† ë¦¬
    â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ calendar-view/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ list-view/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ staff-view/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ period-setup/
    â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â”€ ğŸ“ statistics/
    â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â”€ ğŸ“ notifications/         â­ ì‹ ê·œ
    â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â”€ ğŸ“ settings/
    â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ staff/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ doctors/
    â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ pattern/       â­ ì‹ ê·œ
    â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ rules/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ holidays/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ fairness/
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ notifications/     â­ ìˆ˜ì •
    â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ backup/
    â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€â”€ ğŸ“ logs/
    â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“ (public)/                  â­ ì‹ ê·œ ë¼ìš°íŠ¸ ê·¸ë£¹
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ layout.tsx             (ì¸ì¦ ë¶ˆí•„ìš”)
    â”‚   â”‚   â”œâ”€â”€ ğŸ“ leave-apply/
    â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ [token]/
    â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“ success/
    â”‚   â”‚   â”‚           â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚   â””â”€â”€ ğŸ“ schedule-view/
    â”‚   â”‚       â””â”€â”€ ğŸ“ [token]/
    â”‚   â”‚           â”œâ”€â”€ ğŸ“„ page.tsx
    â”‚   â”‚           â””â”€â”€ ğŸ“„ auth.tsx
    â”‚   â”‚
    â”‚   â””â”€â”€ ğŸ“ api/
    â”‚       â”œâ”€â”€ ğŸ“ auth/
    â”‚       â”‚   â””â”€â”€ ğŸ“ [...nextauth]/
    â”‚       â”‚       â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”œâ”€â”€ ğŸ“ schedule/
    â”‚       â”‚   â”œâ”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â””â”€â”€ ğŸ“ [id]/
    â”‚       â”‚       â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”œâ”€â”€ ğŸ“ staff/
    â”‚       â”‚   â”œâ”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â””â”€â”€ ğŸ“ [id]/
    â”‚       â”‚       â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”œâ”€â”€ ğŸ“ doctors/
    â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”œâ”€â”€ ğŸ“ doctor-pattern/        â­ ì‹ ê·œ
    â”‚       â”‚   â”œâ”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â”œâ”€â”€ ğŸ“ [id]/
    â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â””â”€â”€ ğŸ“ apply/
    â”‚       â”‚       â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”œâ”€â”€ ğŸ“ leave-apply/           â­ ì‹ ê·œ
    â”‚       â”‚   â””â”€â”€ ğŸ“ [token]/
    â”‚       â”‚       â”œâ”€â”€ ğŸ“„ route.ts
    â”‚       â”‚       â”œâ”€â”€ ğŸ“ submit/
    â”‚       â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”‚       â”œâ”€â”€ ğŸ“ status/
    â”‚       â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”‚       â””â”€â”€ ğŸ“ my-application/
    â”‚       â”‚           â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”œâ”€â”€ ğŸ“ leave-management/      â­ ì‹ ê·œ
    â”‚       â”‚   â”œâ”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â”œâ”€â”€ ğŸ“ period/
    â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“ [id]/
    â”‚       â”‚   â”‚       â”œâ”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â”‚       â”œâ”€â”€ ğŸ“ confirm/
    â”‚       â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â”‚       â””â”€â”€ ğŸ“ reopen/
    â”‚       â”‚   â”‚           â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â”œâ”€â”€ ğŸ“ calendar-view/
    â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â”œâ”€â”€ ğŸ“ list-view/
    â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â”œâ”€â”€ ğŸ“ staff-view/
    â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â””â”€â”€ ğŸ“ [id]/
    â”‚       â”‚       â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”œâ”€â”€ ğŸ“ auto-assign/
    â”‚       â”‚   â”œâ”€â”€ ğŸ“ monthly/           â­ ì‹ ê·œ
    â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â”œâ”€â”€ ğŸ“ weekly/            â­ ì‹ ê·œ
    â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â””â”€â”€ ğŸ“ daily/
    â”‚       â”‚       â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”œâ”€â”€ ğŸ“ notifications/         â­ ì‹ ê·œ
    â”‚       â”‚   â”œâ”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â”œâ”€â”€ ğŸ“ unread/
    â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â”œâ”€â”€ ğŸ“ [id]/
    â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“ read/
    â”‚       â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”‚   â””â”€â”€ ğŸ“ read-all/
    â”‚       â”‚       â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”œâ”€â”€ ğŸ“ settings/
    â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚       â”œâ”€â”€ ğŸ“ statistics/
    â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚       â””â”€â”€ ğŸ“ export/
    â”‚           â”œâ”€â”€ ğŸ“ pdf/
    â”‚           â”‚   â””â”€â”€ ğŸ“„ route.ts
    â”‚           â””â”€â”€ ğŸ“ excel/
    â”‚               â””â”€â”€ ğŸ“„ route.ts
    â”‚
    â”œâ”€â”€ ğŸ“ components/
    â”‚   â”œâ”€â”€ ğŸ“ ui/                        # shadcn/ui
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ button.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ input.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ dialog.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ select.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ checkbox.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ calendar.tsx
    â”‚   â”‚   â””â”€â”€ ...
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“ layout/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Header.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Sidebar.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Footer.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ NotificationBell.tsx   â­ ì‹ ê·œ
    â”‚   â”‚   â””â”€â”€ ğŸ“„ DashboardLayout.tsx
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“ calendar/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ CalendarView.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ CalendarGrid.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ CalendarCell.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ DayDetailPopup.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ MonthNavigator.tsx
    â”‚   â”‚   â””â”€â”€ ğŸ“„ PatternApplyButton.tsx â­ ì‹ ê·œ
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“ leave-management/          â­ ì‹ ê·œ ë””ë ‰í† ë¦¬
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Dashboard.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ CalendarView.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ListView.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ StaffView.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ PeriodSetup.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ApplicationCard.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ SlotStatus.tsx
    â”‚   â”‚   â””â”€â”€ ğŸ“„ ConfirmModal.tsx
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“ public-apply/              â­ ì‹ ê·œ ë””ë ‰í† ë¦¬
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ DateSelector.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ TypeSelector.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ RealTimeStatus.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ApplicationForm.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ SuccessMessage.tsx
    â”‚   â”‚   â””â”€â”€ ğŸ“„ ConfirmationModal.tsx
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“ notifications/             â­ ì‹ ê·œ ë””ë ‰í† ë¦¬
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ NotificationPanel.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ NotificationItem.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ NotificationBadge.tsx
    â”‚   â”‚   â””â”€â”€ ğŸ“„ NotificationFilter.tsx
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“ pattern/                   â­ ì‹ ê·œ ë””ë ‰í† ë¦¬
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ DayPatternEditor.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ PatternPreview.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ PatternApplyButton.tsx
    â”‚   â”‚   â””â”€â”€ ğŸ“„ PatternList.tsx
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“ schedule/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ EditPanel.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ DoctorSelector.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ StaffAssignment.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ AutoAssignModal.tsx    â­ ìˆ˜ì • (ì›”ê°„/ì£¼ê°„ ì¶”ê°€)
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ValidationResult.tsx
    â”‚   â”‚   â””â”€â”€ ğŸ“„ FairnessChart.tsx
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“ statistics/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Overview.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ StaffWorkload.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ FairnessReport.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ MonthlyTrend.tsx
    â”‚   â”‚   â””â”€â”€ ğŸ“„ ExportOptions.tsx
    â”‚   â”‚
    â”‚   â””â”€â”€ ğŸ“ settings/
    â”‚       â”œâ”€â”€ ğŸ“„ StaffManager.tsx
    â”‚       â”œâ”€â”€ ğŸ“„ DoctorManager.tsx
    â”‚       â”œâ”€â”€ ğŸ“„ RuleSettings.tsx
    â”‚       â”œâ”€â”€ ğŸ“„ HolidayManager.tsx
    â”‚       â”œâ”€â”€ ğŸ“„ FairnessSettings.tsx
    â”‚       â”œâ”€â”€ ğŸ“„ NotificationSettings.tsx â­ ìˆ˜ì •
    â”‚       â””â”€â”€ ğŸ“„ BackupRestore.tsx
    â”‚
    â”œâ”€â”€ ğŸ“ lib/
    â”‚   â”œâ”€â”€ ğŸ“„ prisma.ts
    â”‚   â”œâ”€â”€ ğŸ“„ auth.ts
    â”‚   â”œâ”€â”€ ğŸ“„ utils.ts
    â”‚   â”œâ”€â”€ ğŸ“„ date-utils.ts
    â”‚   â”œâ”€â”€ ğŸ“ algorithms/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ auto-assign.ts
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ monthly-assign.ts       â­ ì‹ ê·œ
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ weekly-assign.ts        â­ ì‹ ê·œ
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ fairness-calculator.ts
    â”‚   â”‚   â””â”€â”€ ğŸ“„ validation.ts
    â”‚   â”œâ”€â”€ ğŸ“ services/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ schedule-service.ts
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ leave-service.ts        â­ ì‹ ê·œ
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ pattern-service.ts      â­ ì‹ ê·œ
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ notification-service.ts â­ ì‹ ê·œ
    â”‚   â”‚   â””â”€â”€ ğŸ“„ export-service.ts
    â”‚   â””â”€â”€ ğŸ“ hooks/
    â”‚       â”œâ”€â”€ ğŸ“„ use-schedule.ts
    â”‚       â”œâ”€â”€ ğŸ“„ use-leave-management.ts â­ ì‹ ê·œ
    â”‚       â”œâ”€â”€ ğŸ“„ use-notifications.ts    â­ ì‹ ê·œ
    â”‚       â”œâ”€â”€ ğŸ“„ use-pattern.ts          â­ ì‹ ê·œ
    â”‚       â”œâ”€â”€ ğŸ“„ use-auto-assign.ts
    â”‚       â””â”€â”€ ğŸ“„ use-statistics.ts
    â”‚
    â”œâ”€â”€ ğŸ“ types/
    â”‚   â”œâ”€â”€ ğŸ“„ index.ts
    â”‚   â”œâ”€â”€ ğŸ“„ schedule.ts
    â”‚   â”œâ”€â”€ ğŸ“„ staff.ts
    â”‚   â”œâ”€â”€ ğŸ“„ leave.ts                    â­ ì‹ ê·œ
    â”‚   â”œâ”€â”€ ğŸ“„ pattern.ts                  â­ ì‹ ê·œ
    â”‚   â”œâ”€â”€ ğŸ“„ notification.ts             â­ ì‹ ê·œ
    â”‚   â””â”€â”€ ğŸ“„ api.ts
    â”‚
    â””â”€â”€ ğŸ“ styles/
        â””â”€â”€ ğŸ“„ globals.css
```

---

## 4. ë°ì´í„° íë¦„ ë° ë¡œì§ ë¶„ì„

### 4.1 ì „ì²´ ë°ì´í„° íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ë°ì´í„° íë¦„ ì „ì²´ë„                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€1. ì›ì¥ ìŠ¤ì¼€ì¤„ ì„¤ì • íë¦„ã€‘
                                                              
ê´€ë¦¬ì â†’ ì„¤ì •í˜ì´ì§€ â†’ DoctorPattern DB ì €ì¥
   â†“
ë‹¬ë ¥í˜ì´ì§€ â†’ [ìš”ì¼ íŒ¨í„´ ì ìš©] í´ë¦­
   â†“
Schedule DB ì¼ê´„ ìƒì„± (30ì¼)
   â†“
í•„ìš” ì¸ì› ìë™ ê³„ì‚°


ã€2. ì—°ì°¨ ì‹ ì²­ íë¦„ã€‘

ê´€ë¦¬ì â†’ ì‹ ì²­ ë§í¬ ìƒì„±
   â†“
LeaveApplicationPeriod ìƒì„±
   â†“
ì¹´í†¡/ë¬¸ìë¡œ ë§í¬ ê³µìœ  ğŸ“±
   â†“
ì§ì› â†’ ì‹ ì²­ í˜ì´ì§€ ì ‘ì† (ë¡œê·¸ì¸ ì—†ìŒ)
   â†“
ì‹¤ì‹œê°„ ìŠ¬ë¡¯ í™•ì¸ (3ì´ˆë§ˆë‹¤ ìƒˆë¡œê³ ì¹¨)
   â†“
ë‚ ì§œ/ìœ í˜• ì„ íƒ â†’ ì‹ ì²­
   â†“
StaffLeaveApplication ìƒì„±
   â†“
LeaveSlotStatus ì—…ë°ì´íŠ¸ (íŠ¸ëœì­ì…˜)
   â†“
ê´€ë¦¬ìì—ê²Œ ì‹¤ì‹œê°„ ì•Œë¦¼ ğŸ””
   â†“
ê´€ë¦¬ì â†’ ì—°ì°¨ê´€ë¦¬ í˜ì´ì§€ì—ì„œ í™•ì¸
   â†“
[í™•ì •] í´ë¦­
   â†“
Schedule DBì— ì—°ì°¨ ì •ë³´ ë°˜ì˜
   â†“
ì‹ ì²­ í˜ì´ì§€ ìë™ ë‹«í˜


ã€3. ìë™ ë°°ì¹˜ íë¦„ã€‘

ê´€ë¦¬ì â†’ [ì›”ê°„ ìë™ ë°°ì¹˜] í´ë¦­
   â†“
ë°°ì¹˜ ì˜µì…˜ ì„ íƒ:
  â€¢ ìŠ¤ë§ˆíŠ¸ ë°°ì¹˜ (ê¸°ì¡´ ìœ ì§€)
  â€¢ ì™„ì „ ì¬ë°°ì¹˜
   â†“
ì•Œê³ ë¦¬ì¦˜ ì‹¤í–‰:
  â‘  ì—°ì°¨ ì§ì› ì œì™¸
  â‘¡ ë“±ê¸‰ë³„ í•„ìš” ì¸ì› ê³„ì‚°
  â‘¢ í˜•í‰ì„± ì ìˆ˜ ê³„ì‚°
  â‘£ ìµœì  ë°°ì¹˜ ìˆ˜í–‰
   â†“
ì§„í–‰ë¥  ì‹¤ì‹œê°„ í‘œì‹œ (0% â†’ 100%)
   â†“
ë°°ì¹˜ ê²°ê³¼ ê²€ì¦
   â†“
Schedule DB ì—…ë°ì´íŠ¸
   â†“
í˜•í‰ì„± ì¬ê³„ì‚° ë° í‘œì‹œ


ã€4. ì•Œë¦¼ íë¦„ã€‘

ì´ë²¤íŠ¸ ë°œìƒ:
  â€¢ ì—°ì°¨ ì‹ ì²­
  â€¢ ìŠ¬ë¡¯ ë§ˆê° ì„ë°•
  â€¢ ë°°ì¹˜ ì™„ë£Œ
  â€¢ ì‹œìŠ¤í…œ ì•Œë¦¼
   â†“
Notification DB ìƒì„±
   â†“
ì‹¤ì‹œê°„ í‘¸ì‹œ (WebSocket/SSE)
   â†“
í—¤ë” ğŸ”” ì•„ì´ì½˜ì— ë±ƒì§€ í‘œì‹œ
   â†“
ì‚¬ìš©ì í´ë¦­ â†’ ì•Œë¦¼ íŒ¨ë„ ì—´ë¦¼
   â†“
[ì½ìŒ] ì²˜ë¦¬
```

### 4.2 í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

#### 4.2.1 ì›”ê°„ ìë™ ë°°ì¹˜ ì•Œê³ ë¦¬ì¦˜

```typescript
/**
 * ì›”ê°„ ìë™ ë°°ì¹˜ ë¡œì§
 * 
 * ì…ë ¥:
 * - targetMonth: Date (2025-01-01)
 * - mode: 'smart' | 'full' (ìŠ¤ë§ˆíŠ¸/ì™„ì „ì¬ë°°ì¹˜)
 * - considerLeave: boolean (ì—°ì°¨ ê³ ë ¤ ì—¬ë¶€)
 * 
 * ì¶œë ¥:
 * - 30ì¼ì¹˜ ë°°ì¹˜ ê²°ê³¼
 * - í˜•í‰ì„± ì ìˆ˜
 * - ê²½ê³  ë©”ì‹œì§€
 */

async function monthlyAutoAssign(
  targetMonth: Date,
  mode: 'smart' | 'full',
  considerLeave: boolean
) {
  // 1. í•´ë‹¹ ì›”ì˜ ëª¨ë“  ë‚ ì§œ ê°€ì ¸ì˜¤ê¸°
  const dates = getAllDatesInMonth(targetMonth)
  
  // 2. ê° ë‚ ì§œë³„ ìŠ¤ì¼€ì¤„ ì •ë³´ ì¡°íšŒ
  const schedules = await prisma.schedule.findMany({
    where: {
      date: { gte: startOfMonth, lte: endOfMonth }
    },
    include: { staff: true, doctors: true }
  })
  
  // 3. ì—°ì°¨ ì •ë³´ ì¡°íšŒ (í™•ì •ëœ ê²ƒë§Œ)
  const leaves = await prisma.staffLeaveApplication.findMany({
    where: {
      period: { targetMonth, status: 'confirmed' }
    }
  })
  
  // 4. ìŠ¤ë§ˆíŠ¸ ë°°ì¹˜ì¸ ê²½ìš°: ê¸°ì¡´ ë°°ì¹˜ ìœ ì§€
  let staffToAssign = []
  if (mode === 'smart') {
    // ê¸°ì¡´ì— ë°°ì¹˜ëœ ì§ì›ì€ ìœ ì§€
    staffToAssign = getUnassignedStaffOnly(schedules)
  } else {
    // ì™„ì „ ì¬ë°°ì¹˜: ëª¨ë‘ ì´ˆê¸°í™”
    await clearAllAssignments(schedules)
    staffToAssign = await getAllActiveStaff()
  }
  
  // 5. ë‚ ì§œë³„ ë°˜ë³µ ë°°ì¹˜
  for (const date of dates) {
    const schedule = schedules.find(s => isSameDay(s.date, date))
    if (!schedule) continue
    
    // 5-1. í•´ë‹¹ ë‚ ì§œì˜ ì—°ì°¨ ì§ì› ì œì™¸
    const leavingStaff = leaves
      .filter(l => l.applications.some(a => isSameDay(a.date, date)))
      .map(l => l.staffName)
    
    const availableStaff = staffToAssign.filter(
      s => !leavingStaff.includes(s.name)
    )
    
    // 5-2. ë“±ê¸‰ë³„ í•„ìš” ì¸ì› ê³„ì‚°
    const requirements = calculateRequirements(
      schedule.doctors,
      schedule.hasNightShift
    )
    
    // 5-3. í˜•í‰ì„± ê¸°ë°˜ ë°°ì¹˜
    const assigned = assignStaffWithFairness(
      availableStaff,
      requirements,
      date
    )
    
    // 5-4. DB ì—…ë°ì´íŠ¸
    await prisma.schedule.update({
      where: { id: schedule.id },
      data: {
        staff: { connect: assigned.map(s => ({ id: s.id })) },
        leaveCount: leavingStaff.length,
        leaveStaff: leavingStaff
      }
    })
    
    // 5-5. ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ (SSE)
    emitProgress(dates.indexOf(date) / dates.length * 100)
  }
  
  // 6. ì „ì²´ í˜•í‰ì„± ì¬ê³„ì‚°
  const fairness = await recalculateFairness(targetMonth)
  
  // 7. ê²€ì¦
  const validation = validateMonthlySchedule(schedules)
  
  return {
    success: true,
    assigned: schedules.length,
    fairness,
    warnings: validation.warnings
  }
}
```

#### 4.2.2 ì‹¤ì‹œê°„ ìŠ¬ë¡¯ ê´€ë¦¬ ë¡œì§

```typescript
/**
 * ì—°ì°¨ ì‹ ì²­ ì‹œ ìŠ¬ë¡¯ ê´€ë¦¬
 * ë™ì‹œì„± ì œì–´ í¬í•¨
 */

async function submitLeaveApplication(
  token: string,
  staffName: string,
  applications: { date: Date, type: string }[]
) {
  // íŠ¸ëœì­ì…˜ìœ¼ë¡œ ë™ì‹œì„± ì œì–´
  return await prisma.$transaction(async (tx) => {
    // 1. ì‹ ì²­ ê¸°ê°„ í™•ì¸
    const period = await tx.leaveApplicationPeriod.findUnique({
      where: { linkToken: token }
    })
    
    if (!period || period.status !== 'open') {
      throw new Error('ì‹ ì²­ ê¸°ê°„ì´ ì•„ë‹™ë‹ˆë‹¤')
    }
    
    // 2. ê° ë‚ ì§œë³„ ìŠ¬ë¡¯ í™•ì¸ ë° ì˜ˆì•½
    for (const app of applications) {
      const slot = await tx.leaveSlotStatus.findUnique({
        where: {
          periodId_date: {
            periodId: period.id,
            date: app.date
          }
        },
        // ë¹„ê´€ì  ì ê¸ˆ
        lock: 'pessimistic_write'
      })
      
      if (!slot || slot.isFull) {
        throw new Error(`${format(app.date, 'M/d')}ëŠ” ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤`)
      }
      
      // ìŠ¬ë¡¯ ì—…ë°ì´íŠ¸
      await tx.leaveSlotStatus.update({
        where: { id: slot.id },
        data: {
          usedSlots: { increment: 1 },
          remainingSlots: { decrement: 1 },
          isFull: slot.usedSlots + 1 >= slot.maxSlots,
          applicants: { push: staffName }
        }
      })
    }
    
    // 3. ì‹ ì²­ ë‚´ì—­ ì €ì¥
    const application = await tx.staffLeaveApplication.create({
      data: {
        periodId: period.id,
        staffName,
        applications,
        ipAddress: getClientIP(),
        source: 'staff'
      }
    })
    
    // 4. ê´€ë¦¬ìì—ê²Œ ì•Œë¦¼
    await tx.notification.create({
      data: {
        userId: period.createdBy,
        type: 'leave_apply',
        title: 'ìƒˆë¡œìš´ ì—°ì°¨ ì‹ ì²­',
        content: `${staffName}ë‹˜ì´ ${applications.length}ê±´ ì‹ ì²­`
      }
    })
    
    return application
  })
}
```

#### 4.2.3 í˜•í‰ì„± ê³„ì‚° ë¡œì§

```typescript
/**
 * í˜•í‰ì„± ì ìˆ˜ ê³„ì‚°
 * ì•¼ê°„ ê·¼ë¬´, ì£¼ë§ ê·¼ë¬´, ì—°ì°¨ ì‚¬ìš© ê³ ë ¤
 */

async function calculateFairnessScore(
  staffId: string,
  month: Date
) {
  const schedules = await prisma.schedule.findMany({
    where: {
      date: { gte: startOfMonth(month), lte: endOfMonth(month) },
      staff: { some: { id: staffId } }
    }
  })
  
  // 1. ì•¼ê°„ ê·¼ë¬´ íšŸìˆ˜
  const nightShiftCount = schedules.filter(s => s.hasNightShift).length
  
  // 2. ì£¼ë§ ê·¼ë¬´ íšŸìˆ˜
  const weekendCount = schedules.filter(s => {
    const day = getDay(s.date)
    return day === 0 || day === 6
  }).length
  
  // 3. ì—°ì°¨ ì‚¬ìš© ì¼ìˆ˜
  const leaveCount = schedules.reduce((sum, s) => 
    sum + (s.leaveStaff.includes(staffId) ? 1 : 0), 0
  )
  
  // 4. ì „ì²´ ì§ì› í‰ê· ê³¼ ë¹„êµ
  const allStaff = await prisma.staff.findMany({ where: { isActive: true } })
  const avgNightShift = await getAvgNightShift(month)
  const avgWeekend = await getAvgWeekend(month)
  const avgLeave = await getAvgLeave(month)
  
  // 5. í¸ì°¨ ê³„ì‚°
  const nightShiftDeviation = Math.abs(nightShiftCount - avgNightShift)
  const weekendDeviation = Math.abs(weekendCount - avgWeekend)
  const leaveDeviation = Math.abs(leaveCount - avgLeave)
  
  // 6. ì¢…í•© ì ìˆ˜ (ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ)
  const score = 
    nightShiftDeviation * 2.0 +  // ì•¼ê°„ ê°€ì¤‘ì¹˜ ë†’ìŒ
    weekendDeviation * 1.5 +
    leaveDeviation * 1.0
  
  // 7. ë“±ê¸‰ íŒì •
  let grade: 'EXCELLENT' | 'GOOD' | 'FAIR' | 'POOR'
  if (score < 0.5) grade = 'EXCELLENT'
  else if (score < 1.0) grade = 'GOOD'
  else if (score < 1.5) grade = 'FAIR'
  else grade = 'POOR'
  
  return {
    staffId,
    month,
    nightShiftCount,
    weekendCount,
    leaveCount,
    nightShiftDeviation,
    weekendDeviation,
    leaveDeviation,
    totalScore: score,
    grade
  }
}
```

---

## 5. ê°œë°œ ë‹¨ê³„ë³„ ì‹¤í–‰ ê³„íš

### 5.1 ì „ì²´ ê°œë°œ ì¼ì • (10ì£¼)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    10ì£¼ ê°œë°œ ë¡œë“œë§µ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Week 1-2: ê¸°ì´ˆ ì„¤ì • + í•µì‹¬ UI (2ì£¼)
Week 3:   ì›ì¥ íŒ¨í„´ ì €ì¥ (1ì£¼) â­
Week 4-5: ì—°ì°¨ ììœ¨ ì‹ ì²­ ì‹œìŠ¤í…œ (2ì£¼) â­ ìµœìš°ì„ 
Week 6:   ì›”ê°„/ì£¼ê°„ ìë™ ë°°ì¹˜ (1ì£¼) â­
Week 7:   ì•Œë¦¼ ì‹œìŠ¤í…œ (1ì£¼) â­
Week 8:   ê¸°ì¡´ ê¸°ëŠ¥ í†µí•© + í…ŒìŠ¤íŠ¸ (1ì£¼)
Week 9:   ì„±ëŠ¥ ìµœì í™” + ì™„ì„±ë„ (1ì£¼)
Week 10:  ë°°í¬ + êµìœ¡ (1ì£¼)
```

### 5.2 ì£¼ì°¨ë³„ ìƒì„¸ ê³„íš

#### **Week 1-2: ê¸°ì´ˆ ì„¤ì • ë° í•µì‹¬ UI (2ì£¼)**

**ëª©í‘œ**: í”„ë¡œì íŠ¸ ì„¸íŒ… + ê¸°ë³¸ í™”ë©´ êµ¬í˜„

**âœ… ì™„ë£Œ ê¸°ì¤€**:
- Next.js í”„ë¡œì íŠ¸ ìƒì„± ë° ê¸°ë³¸ ì„¤ì •
- Prisma ìŠ¤í‚¤ë§ˆ ì •ì˜ (â­ ì‹ ê·œ í…Œì´ë¸” 5ê°œ í¬í•¨)
- ë¡œê·¸ì¸ í™”ë©´
- ëŒ€ì‹œë³´ë“œ ë ˆì´ì•„ì›ƒ (í—¤ë”, ì‚¬ì´ë“œë°”)
- ë‹¬ë ¥ë·° ê¸°ë³¸ êµ¬ì¡°

**ğŸ“ ì‘ì—… íŒŒì¼**:
```
- package.json (ì˜ì¡´ì„± ì„¤ì •)
- next.config.js
- tailwind.config.ts
- prisma/schema.prisma â­
- src/app/layout.tsx
- src/app/(auth)/login/page.tsx
- src/app/(dashboard)/layout.tsx
- src/app/(dashboard)/calendar/page.tsx
- src/components/layout/*
- src/components/calendar/CalendarView.tsx
```

**ğŸ¯ í•µì‹¬ ì‘ì—…**:
1. **í”„ë¡œì íŠ¸ ì´ˆê¸°í™”**
   ```bash
   npx create-next-app@latest yonsei-dental-schedule --typescript --tailwind --app
   cd yonsei-dental-schedule
   npm install prisma @prisma/client next-auth zod date-fns
   npx prisma init
   ```

2. **Prisma ìŠ¤í‚¤ë§ˆ ì •ì˜** (ì‹ ê·œ í…Œì´ë¸” í¬í•¨)
   - User, Staff, Doctor (ê¸°ì¡´)
   - Schedule, Settings (ê¸°ì¡´)
   - DoctorPattern â­
   - LeaveApplicationPeriod â­
   - StaffLeaveApplication â­
   - LeaveSlotStatus â­
   - Notification â­

3. **NextAuth.js ì„¤ì •**
   - Credentials Provider
   - JWT ì„¸ì…˜

4. **ê¸°ë³¸ ë ˆì´ì•„ì›ƒ**
   - Header (ë¡œê³ , ì‚¬ìš©ì ì •ë³´, ì•Œë¦¼ ë²¨)
   - Sidebar (ë©”ë‰´)
   - Footer

5. **ë‹¬ë ¥ ê·¸ë¦¬ë“œ êµ¬í˜„**
   - ì›”ê°„ ë·° (7x5 ê·¸ë¦¬ë“œ)
   - ë‚ ì§œ ì…€ ê¸°ë³¸ êµ¬ì¡°

---

#### **Week 3: ì›ì¥ íŒ¨í„´ ì €ì¥ ê¸°ëŠ¥ (1ì£¼)** â­

**ëª©í‘œ**: ìš”ì¼ë³„ ì›ì¥ íŒ¨í„´ ì €ì¥ ë° ì ìš©

**âœ… ì™„ë£Œ ê¸°ì¤€**:
- ì›ì¥ íŒ¨í„´ ì„¤ì • í˜ì´ì§€ ì™„ì„±
- íŒ¨í„´ ì €ì¥/ìˆ˜ì •/ì‚­ì œ ê¸°ëŠ¥
- ë‹¬ë ¥ì— íŒ¨í„´ ì ìš© ê¸°ëŠ¥ (1í´ë¦­ 30ì¼ ì„¸íŒ…)

**ğŸ“ ì‘ì—… íŒŒì¼**:
```
- src/app/(dashboard)/settings/doctors/pattern/page.tsx â­
- src/components/pattern/DayPatternEditor.tsx â­
- src/components/pattern/PatternPreview.tsx â­
- src/components/pattern/PatternList.tsx â­
- src/app/api/doctor-pattern/route.ts â­
- src/app/api/doctor-pattern/[id]/route.ts â­
- src/app/api/doctor-pattern/apply/route.ts â­
- src/lib/services/pattern-service.ts â­
- src/lib/hooks/use-pattern.ts â­
```

**ğŸ¯ í•µì‹¬ ì‘ì—…**:
1. **ìš”ì¼ë³„ ì›ì¥ ì„ íƒ UI**
   - ì›”~í†  ê° ìš”ì¼ë³„ íƒ­
   - ì›ì¥ ì²´í¬ë°•ìŠ¤ ì„ íƒ
   - ì•¼ê°„ ì§„ë£Œ í† ê¸€
   - ì €ì¥ ë²„íŠ¼

2. **íŒ¨í„´ ì €ì¥ API**
   ```typescript
   POST /api/doctor-pattern
   Body: {
     dayOfWeek: 1, // ì›”ìš”ì¼
     doctors: ['id1', 'id2'],
     hasNightShift: true
   }
   ```

3. **íŒ¨í„´ ì ìš© ë²„íŠ¼** (ë‹¬ë ¥ í™”ë©´)
   - [ìš”ì¼ íŒ¨í„´ ì ìš©] ë²„íŠ¼
   - í•œ ë‹¬ ì „ì²´ ìŠ¤ì¼€ì¤„ ìƒì„±
   - ê¸°ì¡´ ìŠ¤ì¼€ì¤„ ë®ì–´ì“°ê¸° í™•ì¸
   - ê³µíœ´ì¼ ìë™ ì œì™¸

4. **30ì¼ ì¼ê´„ ìŠ¤ì¼€ì¤„ ìƒì„± ë¡œì§**
   ```typescript
   async function applyPatternToMonth(month: Date) {
     const patterns = await getPatterns()
     const dates = getAllDatesInMonth(month)
     
     for (const date of dates) {
       const dayOfWeek = getDay(date)
       const pattern = patterns[dayOfWeek]
       
       await createOrUpdateSchedule({
         date,
         doctors: pattern.doctors,
         hasNightShift: pattern.hasNightShift
       })
     }
   }
   ```

---

#### **Week 4-5: ì—°ì°¨ ììœ¨ ì‹ ì²­ ì‹œìŠ¤í…œ (2ì£¼)** â­ **ìµœìš°ì„ **

**ëª©í‘œ**: ì§ì› ììœ¨ ì‹ ì²­ + ê´€ë¦¬ì ê´€ë¦¬ í˜ì´ì§€

**âœ… ì™„ë£Œ ê¸°ì¤€**:
- ì‹ ì²­ ë§í¬ ìƒì„± ê¸°ëŠ¥
- ì§ì›ìš© ì‹ ì²­ í˜ì´ì§€ (ë¡œê·¸ì¸ ì—†ìŒ)
- ì‹¤ì‹œê°„ ìŠ¬ë¡¯ ê´€ë¦¬ (ë™ì‹œì„± ì œì–´)
- ê´€ë¦¬ì ì—°ì°¨ê´€ë¦¬ í˜ì´ì§€ (ëŒ€ì‹œë³´ë“œ, ë‹¬ë ¥ë·°, ëª©ë¡ë·°, ì§ì›ë³„ë·°)
- í™•ì • ê¸°ëŠ¥ (Schedule DB ë°˜ì˜)
- Web Share API ì—°ë™

**ğŸ“ ì‘ì—… íŒŒì¼** (ë§ìŒ):
```
ì§ì›ìš© ì‹ ì²­ í˜ì´ì§€:
- src/app/(public)/leave-apply/[token]/page.tsx â­
- src/app/(public)/leave-apply/[token]/success/page.tsx
- src/app/(public)/layout.tsx
- src/components/public-apply/DateSelector.tsx â­
- src/components/public-apply/TypeSelector.tsx â­
- src/components/public-apply/RealTimeStatus.tsx â­
- src/components/public-apply/ApplicationForm.tsx â­
- src/components/public-apply/ConfirmationModal.tsx â­

ê´€ë¦¬ì ì—°ì°¨ê´€ë¦¬:
- src/app/(dashboard)/leave-management/page.tsx â­
- src/app/(dashboard)/leave-management/calendar-view/page.tsx â­
- src/app/(dashboard)/leave-management/list-view/page.tsx â­
- src/app/(dashboard)/leave-management/staff-view/page.tsx â­
- src/app/(dashboard)/leave-management/period-setup/page.tsx â­
- src/components/leave-management/Dashboard.tsx â­
- src/components/leave-management/CalendarView.tsx â­
- src/components/leave-management/ListView.tsx â­
- src/components/leave-management/StaffView.tsx â­
- src/components/leave-management/PeriodSetup.tsx â­
- src/components/leave-management/ConfirmModal.tsx â­

API:
- src/app/api/leave-apply/[token]/route.ts â­
- src/app/api/leave-apply/[token]/submit/route.ts â­
- src/app/api/leave-apply/[token]/status/route.ts â­
- src/app/api/leave-management/route.ts â­
- src/app/api/leave-management/period/route.ts â­
- src/app/api/leave-management/period/[id]/confirm/route.ts â­

ì„œë¹„ìŠ¤ & í›…:
- src/lib/services/leave-service.ts â­
- src/lib/hooks/use-leave-management.ts â­
```

**ğŸ¯ í•µì‹¬ ì‘ì—…**:

**Day 1-3: ì‹ ì²­ ê¸°ê°„ ì„¤ì • ë° ë§í¬ ìƒì„±**
```typescript
// 1. ì‹ ì²­ ê¸°ê°„ ìƒì„± UI
- ëŒ€ìƒ ì›” ì„ íƒ
- ì‹ ì²­ ê¸°ê°„ (ì‹œì‘ì¼~ì¢…ë£Œì¼)
- ë‚ ì§œë³„ ìŠ¬ë¡¯ ì„¤ì • (í‰ì¼ 3ëª…, ì£¼ë§ 1ëª…)
- [ë§í¬ ìƒì„±] ë²„íŠ¼

// 2. ë§í¬ ìƒì„± API
POST /api/leave-management/period
Body: {
  targetMonth: '2025-02-01',
  startDate: '2025-01-20',
  endDate: '2025-01-23',
  maxDaysPerPerson: 10,
  allowTypes: ['annual', 'off'],
  slotSettings: {
    weekday: 3,
    weekend: 1
  }
}
Response: {
  id: 'xxx',
  linkToken: 'abc123',
  shareableLink: 'https://domain.com/leave-apply/abc123'
}

// 3. Web Share API ì—°ë™
<Button onClick={async () => {
  if (navigator.share) {
    await navigator.share({
      title: 'ì—°ì°¨ ì‹ ì²­',
      text: '2ì›” ì—°ì°¨ë¥¼ ì‹ ì²­í•´ì£¼ì„¸ìš”',
      url: shareableLink
    })
  } else {
    // PC: í´ë¦½ë³´ë“œ ë³µì‚¬
    navigator.clipboard.writeText(shareableLink)
    toast('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤')
  }
}}>
  {isMobile ? 'ê³µìœ í•˜ê¸°' : 'ë§í¬ ë³µì‚¬'}
</Button>
```

**Day 4-7: ì§ì›ìš© ì‹ ì²­ í˜ì´ì§€**
```typescript
// 1. í† í° ê¸°ë°˜ ì ‘ê·¼ ì œì–´
- URLì—ì„œ token ì¶”ì¶œ
- DBì—ì„œ LeaveApplicationPeriod ì¡°íšŒ
- status === 'open' í™•ì¸
- ë§ˆê° ì‹œê°„ í™•ì¸

// 2. ì‹¤ì‹œê°„ ìŠ¬ë¡¯ ìƒíƒœ (3ì´ˆë§ˆë‹¤ ìƒˆë¡œê³ ì¹¨)
useEffect(() => {
  const interval = setInterval(async () => {
    const status = await fetch(`/api/leave-apply/${token}/status`)
    setSlots(await status.json())
  }, 3000)
  
  return () => clearInterval(interval)
}, [token])

// 3. ë‚ ì§œ ì„ íƒ UI
<DateSelector
  availableDates={slots.filter(s => !s.isFull)}
  selectedDates={selected}
  onChange={setSelected}
/>

// 4. ì‹ ì²­ ì œì¶œ (íŠ¸ëœì­ì…˜)
POST /api/leave-apply/${token}/submit
Body: {
  staffName: 'ê¹€ì² ìˆ˜',
  applications: [
    { date: '2025-02-05', type: 'annual' },
    { date: '2025-02-06', type: 'off' }
  ]
}

// íŠ¸ëœì­ì…˜ìœ¼ë¡œ ìŠ¬ë¡¯ ë™ì‹œì„± ì œì–´
await prisma.$transaction(async (tx) => {
  // ìŠ¬ë¡¯ í™•ì¸ (ë¹„ê´€ì  ì ê¸ˆ)
  const slot = await tx.leaveSlotStatus.findUnique({
    where: { ... },
    lock: 'pessimistic_write'
  })
  
  if (slot.isFull) throw new Error('ë§ˆê°')
  
  // ìŠ¬ë¡¯ ì—…ë°ì´íŠ¸
  await tx.leaveSlotStatus.update({
    data: { usedSlots: { increment: 1 } }
  })
  
  // ì‹ ì²­ ì €ì¥
  await tx.staffLeaveApplication.create({ ... })
  
  // ì•Œë¦¼ ìƒì„±
  await tx.notification.create({ ... })
})
```

**Day 8-10: ê´€ë¦¬ì ì—°ì°¨ê´€ë¦¬ í˜ì´ì§€**
```typescript
// 1. ëŒ€ì‹œë³´ë“œ
- ì „ì²´ ì‹ ì²­ í˜„í™© (18ëª… ì‹ ì²­ / 20ëª… ì¤‘)
- ì´ ì‹ ì²­ ê±´ìˆ˜ (45ê±´)
- ë‚ ì§œë³„ í˜„í™© (ê·¸ë˜í”„)
- ìµœê·¼ ì‹ ì²­ ëª©ë¡

// 2. ë‹¬ë ¥ë·°
- ë‚ ì§œë³„ ì‹ ì²­ì ëª…ë‹¨
- ìŠ¬ë¡¯ í˜„í™© (5/6)
- ìƒ‰ìƒ ì½”ë“œ (ì—¬ìœ /ë§ˆê°)
- í´ë¦­ ì‹œ ìƒì„¸ íŒì—…

// 3. ëª©ë¡ë·°
- ì „ì²´ ì‹ ì²­ ëª©ë¡ (í…Œì´ë¸”)
- í•„í„° (ë‚ ì§œ, ìœ í˜•, ì§ì›)
- ì •ë ¬ (ë‚ ì§œìˆœ, ì´ë¦„ìˆœ)
- ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼

// 4. ì§ì›ë³„ë·°
- ì§ì›ë³„ ì‹ ì²­ ë‚´ì—­
- ì´ ì‹ ì²­ ì¼ìˆ˜
- ìŠ¹ì¸ ëŒ€ê¸° / í™•ì •
```

**Day 11-14: í™•ì • ê¸°ëŠ¥**
```typescript
// [í™•ì •] ë²„íŠ¼ í´ë¦­
POST /api/leave-management/period/${id}/confirm

// ì„œë²„ ë¡œì§:
async function confirmPeriod(periodId: string) {
  await prisma.$transaction(async (tx) => {
    // 1. ì‹ ì²­ ê¸°ê°„ ìƒíƒœ ë³€ê²½
    await tx.leaveApplicationPeriod.update({
      where: { id: periodId },
      data: { 
        status: 'confirmed',
        confirmedAt: new Date()
      }
    })
    
    // 2. ëª¨ë“  ì‹ ì²­ ë‚´ì—­ ì¡°íšŒ
    const applications = await tx.staffLeaveApplication.findMany({
      where: { periodId }
    })
    
    // 3. Schedule DBì— ì—°ì°¨ ì •ë³´ ë°˜ì˜
    for (const app of applications) {
      for (const leave of app.applications) {
        await tx.schedule.update({
          where: { 
            date: leave.date,
            /* targetMonth ì¡°ê±´ */
          },
          data: {
            leaveCount: { increment: 1 },
            leaveStaff: { push: app.staffName }
          }
        })
      }
    }
    
    // 4. ì§ì› ì‹ ì²­ í˜ì´ì§€ ë‹«ê¸° (status í™•ì¸)
    // ì´ì œ ì‹ ì²­ í˜ì´ì§€ ì ‘ì† ì‹œ "ì‹ ì²­ì´ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤" í‘œì‹œ
  })
}
```

---

#### **Week 6: ì›”ê°„/ì£¼ê°„ ìë™ ë°°ì¹˜ (1ì£¼)** â­

**ëª©í‘œ**: í•œ ë²ˆì— ì—¬ëŸ¬ ë‚ ì§œ ë°°ì¹˜

**âœ… ì™„ë£Œ ê¸°ì¤€**:
- ì›”ê°„ ìë™ ë°°ì¹˜ ê¸°ëŠ¥
- ì£¼ê°„ ìë™ ë°°ì¹˜ ê¸°ëŠ¥
- ìŠ¤ë§ˆíŠ¸ ë°°ì¹˜ vs ì™„ì „ ì¬ë°°ì¹˜ ì˜µì…˜
- ì§„í–‰ë¥  ì‹¤ì‹œê°„ í‘œì‹œ

**ğŸ“ ì‘ì—… íŒŒì¼**:
```
- src/components/schedule/AutoAssignModal.tsx â­ ìˆ˜ì •
- src/app/api/auto-assign/monthly/route.ts â­
- src/app/api/auto-assign/weekly/route.ts â­
- src/lib/algorithms/monthly-assign.ts â­
- src/lib/algorithms/weekly-assign.ts â­
```

**ğŸ¯ í•µì‹¬ ì‘ì—…**:
1. **ë°°ì¹˜ ì˜µì…˜ UI**
   ```typescript
   // ë°°ì¹˜ ë²”ìœ„
   - ì›”ê°„ ë°°ì¹˜ (ì „ì²´)
   - ì£¼ê°„ ë°°ì¹˜ (íŠ¹ì • ì£¼)
   - ì¼ë³„ ë°°ì¹˜ (íŠ¹ì •ì¼)
   
   // ë°°ì¹˜ ë°©ì‹
   - ìŠ¤ë§ˆíŠ¸ ë°°ì¹˜ (ê¸°ì¡´ ìœ ì§€)
   - ì™„ì „ ì¬ë°°ì¹˜
   
   // ê³ ë ¤ ì‚¬í•­
   - ì—°ì°¨ ì œì™¸
   - í˜•í‰ì„± ìš°ì„ 
   ```

2. **ì›”ê°„ ë°°ì¹˜ ì•Œê³ ë¦¬ì¦˜**
   - 30ì¼ì¹˜ ì¼ê´„ ì²˜ë¦¬
   - ì—°ì°¨ ì§ì› ìë™ ì œì™¸
   - í˜•í‰ì„± ìµœì í™”
   - 10~30ì´ˆ ë‚´ ì™„ë£Œ

3. **ì§„í–‰ë¥  í‘œì‹œ** (SSE)
   ```typescript
   // ì„œë²„
   async function* assignWithProgress() {
     for (let i = 0; i < dates.length; i++) {
       await assignDate(dates[i])
       yield { progress: (i + 1) / dates.length * 100 }
     }
   }
   
   // í´ë¼ì´ì–¸íŠ¸
   const eventSource = new EventSource('/api/auto-assign/monthly')
   eventSource.onmessage = (e) => {
     setProgress(JSON.parse(e.data).progress)
   }
   ```

---

#### **Week 7: ì•Œë¦¼ ì‹œìŠ¤í…œ (1ì£¼)** â­

**ëª©í‘œ**: í”„ë¡œê·¸ë¨ ë‚´ ì‹¤ì‹œê°„ ì•Œë¦¼

**âœ… ì™„ë£Œ ê¸°ì¤€**:
- ì•Œë¦¼ ì„¼í„° (í—¤ë” ğŸ”” ì•„ì´ì½˜)
- ì‹¤ì‹œê°„ ì•Œë¦¼ í‘¸ì‹œ (SSE)
- ì•Œë¦¼ ìœ í˜•ë³„ ì²˜ë¦¬
- ì½ìŒ/ì‚­ì œ ê¸°ëŠ¥

**ğŸ“ ì‘ì—… íŒŒì¼**:
```
- src/components/layout/NotificationBell.tsx â­
- src/components/notifications/NotificationPanel.tsx â­
- src/components/notifications/NotificationItem.tsx â­
- src/app/(dashboard)/notifications/page.tsx â­
- src/app/api/notifications/route.ts â­
- src/app/api/notifications/unread/route.ts â­
- src/lib/services/notification-service.ts â­
- src/lib/hooks/use-notifications.ts â­
```

**ğŸ¯ í•µì‹¬ ì‘ì—…**:
1. **ì•Œë¦¼ ë²¨ ì•„ì´ì½˜**
   ```tsx
   <button onClick={togglePanel}>
     <Bell />
     {unreadCount > 0 && (
       <Badge>{unreadCount}</Badge>
     )}
   </button>
   ```

2. **ì‹¤ì‹œê°„ í‘¸ì‹œ** (SSE ê¶Œì¥)
   ```typescript
   // ì„œë²„
   GET /api/notifications/stream
   
   // í´ë¼ì´ì–¸íŠ¸
   useEffect(() => {
     const eventSource = new EventSource('/api/notifications/stream')
     
     eventSource.onmessage = (event) => {
       const notification = JSON.parse(event.data)
       addNotification(notification)
       playSound()
     }
     
     return () => eventSource.close()
   }, [])
   ```

3. **ì•Œë¦¼ ìœ í˜•**
   - leave_apply: ì—°ì°¨ ì‹ ì²­
   - slot_full: ìŠ¬ë¡¯ ë§ˆê°
   - deadline_alert: ë§ˆê° ì„ë°•
   - assign_complete: ë°°ì¹˜ ì™„ë£Œ

---

#### **Week 8: ê¸°ì¡´ ê¸°ëŠ¥ í†µí•© ë° í…ŒìŠ¤íŠ¸ (1ì£¼)**

**ëª©í‘œ**: ê¸°ì¡´ ê¸°ëŠ¥ + ì‹ ê·œ ê¸°ëŠ¥ í†µí•©

**âœ… ì™„ë£Œ ê¸°ì¤€**:
- ìŠ¤ì¼€ì¤„ í¸ì§‘ ê¸°ëŠ¥ (ê¸°ì¡´)
- í†µê³„ í˜ì´ì§€ (ê¸°ì¡´)
- ì„¤ì • í˜ì´ì§€ë“¤ (ê¸°ì¡´ + ìˆ˜ì •)
- ì „ì²´ ê¸°ëŠ¥ ì—°ë™ í…ŒìŠ¤íŠ¸
- ë²„ê·¸ ìˆ˜ì •

**ğŸ¯ í•µì‹¬ ì‘ì—…**:
1. ì—°ì°¨ í™•ì • â†’ ìŠ¤ì¼€ì¤„ ë°˜ì˜ ì—°ë™ í…ŒìŠ¤íŠ¸
2. ìë™ ë°°ì¹˜ â†’ í˜•í‰ì„± ê³„ì‚° ì—°ë™ í…ŒìŠ¤íŠ¸
3. ì „ì²´ ì›Œí¬í”Œë¡œìš° E2E í…ŒìŠ¤íŠ¸
4. ë²„ê·¸ ìˆ˜ì§‘ ë° ìˆ˜ì •

---

#### **Week 9: ì„±ëŠ¥ ìµœì í™” ë° ì™„ì„±ë„ (1ì£¼)**

**ëª©í‘œ**: ì†ë„ ê°œì„  + UX í–¥ìƒ

**âœ… ì™„ë£Œ ê¸°ì¤€**:
- ì›”ê°„ ë°°ì¹˜ ì†ë„ < 30ì´ˆ
- ì‹¤ì‹œê°„ ìŠ¬ë¡¯ ë™ì‹œì„± ì•ˆì •ì„±
- ëª¨ë°”ì¼ ë°˜ì‘í˜• ì™„ì„±
- ë¡œë”©/ì—ëŸ¬ ì²˜ë¦¬ ì™„ë²½

**ğŸ¯ í•µì‹¬ ì‘ì—…**:
1. **DB ì¿¼ë¦¬ ìµœì í™”**
   - ì¸ë±ìŠ¤ ì¶”ê°€
   - N+1 ì¿¼ë¦¬ ì œê±°
   - í˜ì´ì§€ë„¤ì´ì…˜

2. **íŠ¸ëœì­ì…˜ ì„±ëŠ¥**
   - ë¹„ê´€ì  ì ê¸ˆ ìµœì†Œí™”
   - ë°°ì¹˜ ì²˜ë¦¬

3. **í”„ë¡ íŠ¸ì—”ë“œ ìµœì í™”**
   - React.memo
   - useMemo, useCallback
   - ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…

4. **ì—ëŸ¬ ì²˜ë¦¬**
   - Error Boundary
   - Toast ì•Œë¦¼
   - ë¡œê·¸ ìˆ˜ì§‘

---

#### **Week 10: ë°°í¬ ë° êµìœ¡ (1ì£¼)**

**ëª©í‘œ**: ì‹¤ì „ íˆ¬ì…

**âœ… ì™„ë£Œ ê¸°ì¤€**:
- Vercel ë°°í¬ ì™„ë£Œ
- ì‹¤ì œ ë°ì´í„° ì…ë ¥
- ì‚¬ìš©ì êµìœ¡ ì™„ë£Œ
- ê³µì‹ ì˜¤í”ˆ

**ğŸ¯ í•µì‹¬ ì‘ì—…**:
1. **Vercel ë°°í¬**
   ```bash
   npm run build
   vercel --prod
   ```

2. **DB ë§ˆì´ê·¸ë ˆì´ì…˜**
   ```bash
   npx prisma migrate deploy
   ```

3. **ì´ˆê¸° ë°ì´í„° ì…ë ¥**
   - ì§ì› ì •ë³´
   - ì›ì¥ ì •ë³´
   - ê·¼ë¬´ ê·œì¹™
   - íœ´ì—…ì¼

4. **ì‚¬ìš©ì ë§¤ë‰´ì–¼ ì‘ì„±**
5. **êµìœ¡ ì§„í–‰** (2ì‹œê°„)
6. **ê³µì‹ ì˜¤í”ˆ**

---

## 6. Prisma ìŠ¤í‚¤ë§ˆ ì„¤ê³„

### 6.1 ì™„ì „í•œ Prisma ìŠ¤í‚¤ë§ˆ (ì‹ ê·œ í…Œì´ë¸” í¬í•¨)

```prisma
// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ============================================
// ì‚¬ìš©ì ë° ì¸ì¦
// ============================================

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String
  role      Role     @default(USER)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  notifications Notification[]

  @@map("users")
}

enum Role {
  ADMIN
  USER
}

// ============================================
// ì§ì› ê´€ë¦¬
// ============================================

model Staff {
  id              String   @id @default(cuid())
  name            String
  grade           Grade
  phoneNumber     String?
  email           String?
  hireDate        DateTime
  isActive        Boolean  @default(true)
  workDaysPerWeek Int      @default(5)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  schedules Schedule[] @relation("ScheduleStaff")

  @@map("staff")
}

enum Grade {
  MANAGER     // ì‹¤ì¥ê¸‰ (íŒ€ì¥)
  SENIOR      // ê³ ë…„ì°¨
  MIDDLE      // ì¤‘ë…„ì°¨
  JUNIOR      // ì €ë…„ì°¨
}

// ============================================
// ì›ì¥ ê´€ë¦¬
// ============================================

model Doctor {
  id        String   @id @default(cuid())
  name      String
  specialty String?
  isActive  Boolean  @default(true)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  schedules Schedule[] @relation("ScheduleDoctors")

  @@map("doctors")
}

// â­ ì‹ ê·œ: ì›ì¥ ìš”ì¼ë³„ íŒ¨í„´
model DoctorPattern {
  id            String   @id @default(cuid())
  dayOfWeek     Int      // 0=ì¼ìš”ì¼, 1=ì›”ìš”ì¼, ..., 6=í† ìš”ì¼
  doctors       String[] // Doctor ID ë°°ì—´
  doctorMode    String   // "ë°•(ì§„ë£Œ)+êµ¬+ìœ¤" (í‘œì‹œìš©)
  hasNightShift Boolean  @default(false)
  isActive      Boolean  @default(true)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([dayOfWeek])
  @@map("doctor_patterns")
}

// ============================================
// ìŠ¤ì¼€ì¤„ ê´€ë¦¬
// ============================================

model Schedule {
  id               String   @id @default(cuid())
  date             DateTime @unique
  
  // ì›ì¥ ì •ë³´
  doctors          Doctor[] @relation("ScheduleDoctors")
  doctorMode       String   // "ë°•(ì§„ë£Œ)+êµ¬+ìœ¤"
  hasNightShift    Boolean  @default(false)
  
  // í•„ìš” ì¸ì›
  requiredManager  Int      @default(0)
  requiredSenior   Int      @default(0)
  requiredMiddle   Int      @default(0)
  requiredJunior   Int      @default(0)
  
  // ë°°ì¹˜ëœ ì§ì›
  staff            Staff[]  @relation("ScheduleStaff")
  
  // ì—°ì°¨ ì •ë³´ â­
  leaveCount       Int      @default(0)    // ì—°ì°¨ ì‚¬ìš© ì¸ì›
  leaveStaff       String[] @default([])   // ì—°ì°¨ ì‚¬ìš© ì§ì› ëª…ë‹¨
  
  // ê³„ì‚° í•„ë“œ
  availableLeaveSlots Int   @default(0)    // ì‰´ ìˆ˜ ìˆëŠ” ì¸ì›
  actualAvailable     Int   @default(0)    // ì‹¤ì œ ë°°ì¹˜ ê°€ëŠ¥ ì¸ì›
  
  // ìƒíƒœ
  isComplete       Boolean  @default(false)
  isHoliday        Boolean  @default(false)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([date])
  @@map("schedules")
}

// ============================================
// â­ ì‹ ê·œ: ì—°ì°¨ ê´€ë¦¬
// ============================================

// ì—°ì°¨ ì‹ ì²­ ê¸°ê°„
model LeaveApplicationPeriod {
  id                String   @id @default(cuid())
  targetMonth       DateTime // 2025-01-01 (ëŒ€ìƒ ì›”)
  startDate         DateTime // ì‹ ì²­ ì‹œì‘ì¼
  endDate           DateTime // ì‹ ì²­ ë§ˆê°ì¼
  status            PeriodStatus @default(DRAFT)
  
  maxDaysPerPerson  Int      @default(10)
  allowTypes        String[] @default(["annual", "off", "half"])
  
  shareableLink     String   @unique
  linkToken         String   @unique @default(cuid())
  
  createdBy         String
  createdAt         DateTime @default(now())
  confirmedAt       DateTime?
  confirmedBy       String?
  
  applications      StaffLeaveApplication[]
  slotStatuses      LeaveSlotStatus[]

  @@index([linkToken])
  @@index([targetMonth])
  @@map("leave_application_periods")
}

enum PeriodStatus {
  DRAFT      // ì´ˆì•ˆ
  OPEN       // ì‹ ì²­ ì˜¤í”ˆ
  CLOSED     // ì‹ ì²­ ë§ˆê°
  CONFIRMED  // í™•ì • ì™„ë£Œ
}

// ì§ì› ì—°ì°¨ ì‹ ì²­
model StaffLeaveApplication {
  id          String   @id @default(cuid())
  period      LeaveApplicationPeriod @relation(fields: [periodId], references: [id], onDelete: Cascade)
  periodId    String
  
  staffName   String   // ë¡œê·¸ì¸ ì—†ìœ¼ë¯€ë¡œ ì´ë¦„ìœ¼ë¡œ ì‹ë³„
  applications Json    // { date: Date, type: 'annual' | 'off' | 'half' }[]
  
  submittedAt DateTime @default(now())
  ipAddress   String
  
  isEdited    Boolean  @default(false)
  editedAt    DateTime?
  
  source      ApplicationSource @default(STAFF)
  memo        String?

  @@index([periodId])
  @@index([staffName])
  @@map("staff_leave_applications")
}

enum ApplicationSource {
  STAFF  // ì§ì›ì´ ì§ì ‘ ì‹ ì²­
  ADMIN  // ê´€ë¦¬ìê°€ ìˆ˜ë™ ì…ë ¥
  IMPORT // ì—‘ì…€ ë“±ì—ì„œ ê°€ì ¸ì˜¤ê¸°
}

// ë‚ ì§œë³„ ìŠ¬ë¡¯ í˜„í™©
model LeaveSlotStatus {
  id             String   @id @default(cuid())
  period         LeaveApplicationPeriod @relation(fields: [periodId], references: [id], onDelete: Cascade)
  periodId       String
  
  date           DateTime
  maxSlots       Int      // ì‰´ ìˆ˜ ìˆëŠ” ìµœëŒ€ ì¸ì›
  usedSlots      Int      @default(0)
  remainingSlots Int      // maxSlots - usedSlots
  isFull         Boolean  @default(false)
  
  applicants     String[] @default([]) // ì‹ ì²­ì ëª…ë‹¨
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([periodId, date])
  @@index([periodId])
  @@index([date])
  @@map("leave_slot_statuses")
}

// ============================================
// â­ ì‹ ê·œ: ì•Œë¦¼
// ============================================

model Notification {
  id        String   @id @default(cuid())
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId    String
  
  type      NotificationType
  title     String
  content   String
  data      Json?    // ì¶”ê°€ ë°ì´í„° (ë§í¬ ë“±)
  
  isRead    Boolean  @default(false)
  readAt    DateTime?
  
  createdAt DateTime @default(now())

  @@index([userId, isRead])
  @@index([createdAt])
  @@map("notifications")
}

enum NotificationType {
  LEAVE_APPLY      // ì—°ì°¨ ì‹ ì²­
  SLOT_FULL        // ìŠ¬ë¡¯ ë§ˆê°
  DEADLINE_ALERT   // ë§ˆê° ì„ë°•
  ASSIGN_COMPLETE  // ë°°ì¹˜ ì™„ë£Œ
  SYSTEM           // ì‹œìŠ¤í…œ ì•Œë¦¼
}

// ============================================
// ì„¤ì • ê´€ë¦¬
// ============================================

model Settings {
  id        String   @id @default(cuid())
  
  // ê·¼ë¬´ ê·œì¹™
  workDaysPerWeek    Int      @default(5)
  
  // ë“±ê¸‰ë³„ ë¹„ìœ¨
  managerRatio       Float    @default(0.2)
  seniorRatio        Float    @default(0.3)
  middleRatio        Float    @default(0.3)
  juniorRatio        Float    @default(0.2)
  
  // ë°°ì¹˜ ê·œì¹™
  mustHaveManager    Boolean  @default(true)
  
  // í˜•í‰ì„± ê·œì¹™
  maxConsecutiveWork Int      @default(5)
  
  // âŒ ì œê±°: ì—°ì°¨-íœ´ë¬´ ë¶™ì´ê¸° ê´€ë ¨ ì„¤ì •
  // âŒ ì œê±°: ì—°ì† íœ´ë¬´ ìµœì†Œ ì¼ìˆ˜
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("settings")
}

// ============================================
// íœ´ì—…ì¼ ê´€ë¦¬
// ============================================

model Holiday {
  id        String   @id @default(cuid())
  date      DateTime @unique
  name      String
  isRecurring Boolean @default(false)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("holidays")
}

// ============================================
// í™œë™ ë¡œê·¸
// ============================================

model ActivityLog {
  id        String   @id @default(cuid())
  userId    String
  action    String
  targetType String?
  targetId   String?
  details    Json?
  ipAddress  String?
  
  createdAt DateTime @default(now())

  @@index([userId])
  @@index([createdAt])
  @@map("activity_logs")
}
```

---

## 7. í•µì‹¬ API ëª…ì„¸

### 7.1 ì—°ì°¨ ì‹ ì²­ API (ì§ì›ìš©)

#### GET /api/leave-apply/[token]
**ì„¤ëª…**: ì‹ ì²­ í˜ì´ì§€ ë°ì´í„° ì¡°íšŒ
**ì¸ì¦**: ë¶ˆí•„ìš” (í† í°ìœ¼ë¡œ ì‹ë³„)
**ì‘ë‹µ**:
```json
{
  "period": {
    "id": "xxx",
    "targetMonth": "2025-02-01",
    "startDate": "2025-01-20",
    "endDate": "2025-01-23",
    "status": "open",
    "maxDaysPerPerson": 10
  },
  "slots": [
    {
      "date": "2025-02-05",
      "maxSlots": 3,
      "usedSlots": 2,
      "remainingSlots": 1,
      "isFull": false
    }
  ]
}
```

#### POST /api/leave-apply/[token]/submit
**ì„¤ëª…**: ì—°ì°¨ ì‹ ì²­ ì œì¶œ
**Body**:
```json
{
  "staffName": "ê¹€ì² ìˆ˜",
  "applications": [
    { "date": "2025-02-05", "type": "annual" },
    { "date": "2025-02-06", "type": "off" }
  ]
}
```
**ì‘ë‹µ**:
```json
{
  "success": true,
  "applicationId": "xxx",
  "message": "ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤"
}
```

#### GET /api/leave-apply/[token]/status
**ì„¤ëª…**: ì‹¤ì‹œê°„ ìŠ¬ë¡¯ í˜„í™© (í´ë§ìš©)
**ì‘ë‹µ**: ìœ„ì™€ ë™ì¼

---

### 7.2 ì—°ì°¨ ê´€ë¦¬ API (ê´€ë¦¬ììš©)

#### POST /api/leave-management/period
**ì„¤ëª…**: ì‹ ì²­ ê¸°ê°„ ìƒì„±
**ì¸ì¦**: í•„ìš”
**Body**:
```json
{
  "targetMonth": "2025-02-01",
  "startDate": "2025-01-20",
  "endDate": "2025-01-23",
  "maxDaysPerPerson": 10,
  "allowTypes": ["annual", "off"],
  "slotSettings": {
    "weekday": 3,
    "weekend": 1
  }
}
```
**ì‘ë‹µ**:
```json
{
  "id": "xxx",
  "linkToken": "abc123",
  "shareableLink": "https://domain.com/leave-apply/abc123"
}
```

#### POST /api/leave-management/period/[id]/confirm
**ì„¤ëª…**: ì—°ì°¨ ì‹ ì²­ í™•ì • (Schedule DB ë°˜ì˜)
**ì¸ì¦**: í•„ìš”
**ì‘ë‹µ**:
```json
{
  "success": true,
  "confirmedCount": 45,
  "message": "í™•ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤"
}
```

---

### 7.3 ìë™ ë°°ì¹˜ API

#### POST /api/auto-assign/monthly
**ì„¤ëª…**: ì›”ê°„ ìë™ ë°°ì¹˜
**ì¸ì¦**: í•„ìš”
**Body**:
```json
{
  "targetMonth": "2025-02-01",
  "mode": "smart",
  "considerLeave": true
}
```
**ì‘ë‹µ** (SSE ìŠ¤íŠ¸ë¦¼):
```
event: progress
data: {"progress": 30, "message": "15/30 ì™„ë£Œ"}

event: complete
data: {"success": true, "assigned": 30}
```

---

## 8. êµ¬í˜„ ìš°ì„ ìˆœìœ„ë³„ ìƒì„¸ ê°€ì´ë“œ

### 8.1 ìµœìš°ì„  êµ¬í˜„ í•­ëª© (Week 3-5)

```
1ìˆœìœ„: ì›ì¥ íŒ¨í„´ ì €ì¥/ì ìš© (Week 3)
  - ì‹œê°„ ì ˆê° íš¨ê³¼ ìµœëŒ€
  - ë‹¤ë¥¸ ê¸°ëŠ¥ì˜ ê¸°ë°˜

2ìˆœìœ„: ì—°ì°¨ ììœ¨ ì‹ ì²­ ì‹œìŠ¤í…œ (Week 4-5)
  - í•µì‹¬ ê¸°ëŠ¥
  - ì‚¬ìš©ì ê²½í—˜ ê°œì„  ìµœëŒ€
  - ê°€ì¥ ë³µì¡í•˜ë¯€ë¡œ ì¶©ë¶„í•œ ì‹œê°„ í•„ìš”

3ìˆœìœ„: ì›”ê°„ ìë™ ë°°ì¹˜ (Week 6)
  - íš¨ìœ¨ì„± í–¥ìƒ
  - ì—°ì°¨ ì •ë³´ í™œìš©

4ìˆœìœ„: ì•Œë¦¼ ì‹œìŠ¤í…œ (Week 7)
  - ì‹¤ì‹œê°„ í˜„í™© íŒŒì•…
  - ì‚¬ìš© í¸ì˜ì„±
```

### 8.2 êµ¬í˜„ ìˆœì„œ ê¶Œì¥ì‚¬í•­

**ê·¼ê±°**: ì˜ì¡´ì„± ë° ë³µì¡ë„ ê³ ë ¤

1. **Week 1-2**: ê¸°ì´ˆ ì‘ì—…ì€ ë°˜ë“œì‹œ ë¨¼ì €
2. **Week 3**: ì›ì¥ íŒ¨í„´ì€ ë…ë¦½ì ì´ë¯€ë¡œ ë¨¼ì € êµ¬í˜„ ê°€ëŠ¥
3. **Week 4-5**: ì—°ì°¨ ì‹ ì²­ ì‹œìŠ¤í…œì€ ê°€ì¥ ë³µì¡í•˜ë¯€ë¡œ 2ì£¼ í™•ë³´
4. **Week 6**: ìë™ ë°°ì¹˜ëŠ” ì—°ì°¨ ì •ë³´ë¥¼ í™œìš©í•˜ë¯€ë¡œ ê·¸ ë‹¤ìŒ
5. **Week 7**: ì•Œë¦¼ì€ ë‹¤ë¥¸ ê¸°ëŠ¥ë“¤ì´ ì™„ì„±ëœ í›„
6. **Week 8-10**: í†µí•©, ìµœì í™”, ë°°í¬

---

## ğŸ“Š ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… ë¬¸ì„œ ì™„ì„±ë„ í™•ì¸

```
âœ… í”„ë¡œì íŠ¸ ì „ì²´ ë¶„ì„ ì™„ë£Œ
âœ… ëˆ„ë½ëœ í˜ì´ì§€/ê¸°ëŠ¥ ëª¨ë‘ íŒŒì•…
âœ… ì „ì²´ íŒŒì¼ êµ¬ì¡° ì •ì˜
âœ… ë°ì´í„° íë¦„ ëª…í™•í™”
âœ… ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìƒì„¸í™”
âœ… Prisma ìŠ¤í‚¤ë§ˆ ì™„ì„± (ì‹ ê·œ 5ê°œ í…Œì´ë¸” í¬í•¨)
âœ… API ì—”ë“œí¬ì¸íŠ¸ ì „ì²´ ì •ì˜
âœ… 10ì£¼ ê°œë°œ ê³„íš ìˆ˜ë¦½
âœ… ì£¼ì°¨ë³„ ìƒì„¸ ê°€ì´ë“œ ì‘ì„±
```

### âœ… ì¶”ê°€ëœ í•µì‹¬ ê¸°ëŠ¥

```
âœ… ì›ì¥ ìš”ì¼ë³„ íŒ¨í„´ ì €ì¥
âœ… ì—°ì°¨ ììœ¨ ì‹ ì²­ ì‹œìŠ¤í…œ
  âœ… ì‹ ì²­ ë§í¬ ìƒì„±
  âœ… ì§ì›ìš© ì‹ ì²­ í˜ì´ì§€ (ë¡œê·¸ì¸ ë¶ˆí•„ìš”)
  âœ… ì‹¤ì‹œê°„ ìŠ¬ë¡¯ ê´€ë¦¬ (ë™ì‹œì„± ì œì–´)
  âœ… ê´€ë¦¬ì í™•ì • ê¸°ëŠ¥
âœ… ì—°ì°¨ê´€ë¦¬ ì „ìš© í˜ì´ì§€
  âœ… ëŒ€ì‹œë³´ë“œ
  âœ… ë‹¬ë ¥ë·°
  âœ… ëª©ë¡ë·°
  âœ… ì§ì›ë³„ë·°
âœ… ì›”ê°„/ì£¼ê°„ ìë™ ë°°ì¹˜
âœ… ì•Œë¦¼ ì„¼í„°
âœ… Web Share API ì—°ë™
```

### âœ… ì œê±°ëœ ë¶ˆí•„ìš” ê¸°ëŠ¥

```
âœ… ì—°ì°¨ ì…ë ¥ ëª¨ë“œ (ë“œë˜ê·¸) ì œê±°
âœ… ì—°ì°¨-íœ´ë¬´ ë¶™ì´ê¸° ì„¤ì • ì œê±°
âœ… ì—°ì† íœ´ë¬´ ì„¤ì • ì œê±°
âœ… ì´ë©”ì¼ ì•Œë¦¼ ì œê±°
âœ… ë³µì¡í•œ íŒ¨í„´ ë¶„ì„ ì œê±°
```

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

ì´ ë¬¸ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ìŒ ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. **Prisma ìŠ¤í‚¤ë§ˆ íŒŒì¼ ìƒì„±** (ì¦‰ì‹œ ì‹œì‘ ê°€ëŠ¥)
2. **íŠ¹ì • ê¸°ëŠ¥ ìƒì„¸ ì½”ë“œ êµ¬í˜„**
   - ì—°ì°¨ ììœ¨ ì‹ ì²­ ì‹œìŠ¤í…œ ì „ì²´
   - ì›”ê°„ ìë™ ë°°ì¹˜ ì•Œê³ ë¦¬ì¦˜
3. **í•µì‹¬ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ ìƒì„±**
   - ì—°ì°¨ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ
   - ì§ì›ìš© ì‹ ì²­ í˜ì´ì§€

---

**ë¬¸ì„œ ë²„ì „**: 3.0 (ìµœì¢…)  
**ì‘ì„± ì™„ë£Œ**: 2025-10-22  
**í™•ì‹¤ì„± ìˆ˜ì¤€**: [í™•ì¸ë¨]  
**ì‘ì—… ìƒíƒœ**: âœ… ì™„ë£Œ

ì´ ë¬¸ì„œëŠ” ì—°ì„¸ë°”ë¡œì¹˜ê³¼ ìŠ¤ì¼€ì¤„ ê´€ë¦¬ ì‹œìŠ¤í…œì˜ ì™„ì „í•œ ê°œë°œ ê°€ì´ë“œì…ë‹ˆë‹¤.
