# ì—°ì°¨/ì˜¤í”„ ì‹ ì²­ í•„í„° í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## ðŸ“‹ í•„í„° ê°œìš”

ì—°ì°¨/ì˜¤í”„ ì‹ ì²­ ì‹œ 3ê°€ì§€ í•„í„°ê°€ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤:

1. **ì£¼4ì¼ ì œì•½** (OFFë§Œ í•´ë‹¹)
2. **êµ¬ë¶„ë³„ í•„ìˆ˜ ì¸ì›** (ì—°ì°¨/OFF ëª¨ë‘ í•´ë‹¹)
3. **í˜•í‰ì„± ê¸°ë°˜ í•œë„** (OFFë§Œ í•´ë‹¹)

---

## âœ… 1. ì£¼4ì¼ ì œì•½ í…ŒìŠ¤íŠ¸

### ëª©ì 
ì£¼ë‹¹ ìµœì†Œ 4ì¼ ê·¼ë¬´ ë³´ìž¥ (ì£¼ë‹¹ OFF ìµœëŒ€ 2ê°œ)

### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### âœ… ì‹œë‚˜ë¦¬ì˜¤ 1-1: ê°™ì€ ì£¼ ë‚´ OFF 2ê°œ ì„ íƒ
```
1. 11ì›” 17ì¼(ì›”) OFF ì„ íƒ â†’ ì„±ê³µ
2. 11ì›” 18ì¼(í™”) OFF ì„ íƒ â†’ ì„±ê³µ
3. 11ì›” 19ì¼(ìˆ˜) OFF ì„ íƒ â†’ ì°¨ë‹¨
   ì˜ˆìƒ ë©”ì‹œì§€: "ì´ë²ˆ ì£¼ì— ì´ë¯¸ 2ê°œì˜ OFFê°€ ìžˆìŠµë‹ˆë‹¤"
```

#### âœ… ì‹œë‚˜ë¦¬ì˜¤ 1-2: ë‹¤ë¥¸ ì£¼ëŠ” ë…ë¦½ì ìœ¼ë¡œ ê³„ì‚°
```
1. 11ì›” 17ì¼(ì›”) OFF ì„ íƒ â†’ ì„±ê³µ
2. 11ì›” 18ì¼(í™”) OFF ì„ íƒ â†’ ì„±ê³µ
3. 11ì›” 24ì¼(ì›”, ë‹¤ìŒ ì£¼) OFF ì„ íƒ â†’ ì„±ê³µ (ë‹¤ë¥¸ ì£¼)
4. 11ì›” 25ì¼(í™”) OFF ì„ íƒ â†’ ì„±ê³µ
5. 11ì›” 26ì¼(ìˆ˜) OFF ì„ íƒ â†’ ì°¨ë‹¨ (ë‹¤ìŒ ì£¼ OFF 2ê°œ ì´ˆê³¼)
```

#### âœ… ì‹œë‚˜ë¦¬ì˜¤ 1-3: ì—°ì°¨ëŠ” OFF ì¹´ìš´íŠ¸ì— í¬í•¨ ì•ˆë¨
```
1. 11ì›” 17ì¼(ì›”) ì—°ì°¨ ì„ íƒ â†’ ì„±ê³µ
2. 11ì›” 18ì¼(í™”) OFF ì„ íƒ â†’ ì„±ê³µ
3. 11ì›” 19ì¼(ìˆ˜) OFF ì„ íƒ â†’ ì„±ê³µ
4. 11ì›” 20ì¼(ëª©) OFF ì„ íƒ â†’ ì°¨ë‹¨ (OFFëŠ” 2ê°œë§Œ)
```

---

## ðŸ” 2. êµ¬ë¶„ë³„ í•„ìˆ˜ ì¸ì› í…ŒìŠ¤íŠ¸

### ëª©ì 
ë‚ ì§œë³„ ê° êµ¬ë¶„ì˜ ìµœì†Œ í•„ìˆ˜ ì¸ì› í™•ë³´

### ì‚¬ì „ í™•ì¸ ì‚¬í•­
```sql
-- íŠ¹ì • ë‚ ì§œì˜ ì›ìž¥ ì¡°í•© ë° í•„ìš” ì¸ì› í™•ì¸
SELECT dc.doctors, dc.departmentCategoryStaff
FROM "DoctorCombination" dc
JOIN "ScheduleDoctor" sd ON sd.date = '2025-11-10'
WHERE dc.doctors = (
  SELECT ARRAY_AGG(d.shortName ORDER BY d.shortName)
  FROM "ScheduleDoctor" sd2
  JOIN "Doctor" d ON d.id = sd2."doctorId"
  WHERE sd2.date = '2025-11-10'
);

-- ê²°ê³¼ ì˜ˆì‹œ:
-- íŒ€ìž¥/ì‹¤ìž¥: 1ëª… í•„ìš”, ì´ 2ëª…
-- ê³ ë…„ì°¨: 2ëª… í•„ìš”, ì´ 4ëª…
-- ì¤‘ê°„ë…„ì°¨: 3ëª… í•„ìš”, ì´ 4ëª…
-- ì €ë…„ì°¨: 2ëª… í•„ìš”, ì´ 2ëª…
```

### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### ðŸ§ª ì‹œë‚˜ë¦¬ì˜¤ 2-1: ì €ë…„ì°¨ ìŠ¬ë¡¯ ë¶€ì¡± (í•„ìš” 2ëª…, ì´ 2ëª…)
```
ì „ì œ: 11ì›” 10ì¼, ì €ë…„ì°¨ í•„ìš” 2ëª…, ì´ ì €ë…„ì°¨ 2ëª…

1. ì €ë…„ì°¨ ì§ì› A: 11ì›” 10ì¼ OFF ì‹ ì²­ â†’ ì„±ê³µ
   (í•„ìš” 2ëª…, ê°€ìš© 1ëª… ë‚¨ìŒ)

2. ì €ë…„ì°¨ ì§ì› B: 11ì›” 10ì¼ OFF ì‹ ì²­ â†’ ì°¨ë‹¨
   ì˜ˆìƒ ë©”ì‹œì§€: "ì €ë…„ì°¨ êµ¬ë¶„ì˜ ì‹ ì²­ ê°€ëŠ¥ ìŠ¬ë¡¯ì´ ë¶€ì¡±í•©ë‹ˆë‹¤"
```

#### ðŸ§ª ì‹œë‚˜ë¦¬ì˜¤ 2-2: íŒ€ìž¥ ìŠ¬ë¡¯ ì—¬ìœ  ìžˆìŒ (í•„ìš” 1ëª…, ì´ 2ëª…)
```
ì „ì œ: 11ì›” 10ì¼, íŒ€ìž¥ í•„ìš” 1ëª…, ì´ íŒ€ìž¥ 2ëª…

1. íŒ€ìž¥ ì§ì› A: 11ì›” 10ì¼ OFF ì‹ ì²­ â†’ ì„±ê³µ
   (í•„ìš” 1ëª…, ê°€ìš© 1ëª… ë‚¨ìŒ)

2. íŒ€ìž¥ ì§ì› B: 11ì›” 10ì¼ OFF ì‹ ì²­ â†’ ì°¨ë‹¨
   ì˜ˆìƒ ë©”ì‹œì§€: "íŒ€ìž¥/ì‹¤ìž¥ êµ¬ë¶„ì˜ ì‹ ì²­ ê°€ëŠ¥ ìŠ¬ë¡¯ì´ ë¶€ì¡±í•©ë‹ˆë‹¤"
```

#### ðŸ§ª ì‹œë‚˜ë¦¬ì˜¤ 2-3: ì—°ì°¨ë„ ìŠ¬ë¡¯ ì°¨ì§€
```
1. ê³ ë…„ì°¨ ì§ì› A: 11ì›” 10ì¼ ì—°ì°¨ ì‹ ì²­ â†’ ì„±ê³µ
2. ê³ ë…„ì°¨ ì§ì› B: 11ì›” 10ì¼ ì—°ì°¨ ì‹ ì²­ â†’ ì„±ê³µ
3. ê³ ë…„ì°¨ ì§ì› C: 11ì›” 10ì¼ OFF ì‹ ì²­ â†’ ì„±ê³µ/ì°¨ë‹¨
   (í•„ìš” ì¸ì›ì— ë”°ë¼ ë‹¬ë¼ì§)
```

### ì‹¤ì œ í…ŒìŠ¤íŠ¸ ë°©ë²•
```
1. ëŒ€ì‹œë³´ë“œ â†’ ì„¤ì • â†’ ì¡°í•© ê´€ë¦¬ì—ì„œ íŠ¹ì • ë‚ ì§œì˜ ì¡°í•© í™•ì¸
2. í•´ë‹¹ ì¡°í•©ì˜ êµ¬ë¶„ë³„ í•„ìš” ì¸ì› í™•ì¸
3. ë™ì¼ êµ¬ë¶„ ì§ì›ë“¤ì´ ìˆœì°¨ì ìœ¼ë¡œ ì‹ ì²­
4. ë§ˆì§€ë§‰ ìŠ¬ë¡¯ì—ì„œ ì°¨ë‹¨ ë©”ì‹œì§€ í™•ì¸
```

---

## ðŸ“Š 3. í˜•í‰ì„± ê¸°ë°˜ í•œë„ í…ŒìŠ¤íŠ¸

### ëª©ì 
ê³¼ê±° ê·¼ë¬´ ì´ë ¥ ê¸°ë°˜ìœ¼ë¡œ ì´ë²ˆ ë‹¬ ìµœëŒ€ OFF ì‹ ì²­ ì¼ìˆ˜ ì œí•œ

### í˜•í‰ì„± ì ìˆ˜ í™•ì¸ ë°©ë²•
```
1. /leave-apply/[token] íŽ˜ì´ì§€ ì ‘ì†
2. ì§ì› ì¸ì¦ í›„ "í˜•í‰ì„± í™•ì¸" ì¹´ë“œ í™•ì¸
3. "ì´ë²ˆ ë‹¬ ë‚¨ì€ ì˜¤í”„ ì‹ ì²­ ê°€ëŠ¥: Xì¼" í™•ì¸
```

### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### ðŸ“ˆ ì‹œë‚˜ë¦¬ì˜¤ 3-1: í˜•í‰ì„± ì ìˆ˜ ë†’ì€ ì§ì› (ë§Žì´ ì¼í•œ ì§ì›)
```
ì „ì œ:
- ëˆ„ì  í˜•í‰ì„± ì ìˆ˜: 3.5 (ë¶€ì„œ í‰ê·  0.0ë³´ë‹¤ ë†’ìŒ)
- ì´ë²ˆ ë‹¬ ìµœëŒ€ ì‹ ì²­ ê°€ëŠ¥: 7ì¼

1. 11ì›” 3ì¼ OFF ì‹ ì²­ â†’ ì„±ê³µ (1/7)
2. 11ì›” 4ì¼ OFF ì‹ ì²­ â†’ ì„±ê³µ (2/7)
3. ... (ê³„ì† ì‹ ì²­)
4. 11ì›” 9ì¼ OFF ì‹ ì²­ â†’ ì„±ê³µ (7/7)
5. 11ì›” 10ì¼ OFF ì‹ ì²­ â†’ ì°¨ë‹¨
   ì˜ˆìƒ ë©”ì‹œì§€: "í˜•í‰ì„± ê¸°ì¤€ ì´ˆê³¼"
```

#### ðŸ“‰ ì‹œë‚˜ë¦¬ì˜¤ 3-2: í˜•í‰ì„± ì ìˆ˜ ë‚®ì€ ì§ì› (ë§Žì´ ì‰° ì§ì›)
```
ì „ì œ:
- ëˆ„ì  í˜•í‰ì„± ì ìˆ˜: -2.0 (ë¶€ì„œ í‰ê· ë³´ë‹¤ ë‚®ìŒ)
- ì´ë²ˆ ë‹¬ ìµœëŒ€ ì‹ ì²­ ê°€ëŠ¥: 3ì¼

1. 11ì›” 3ì¼ OFF ì‹ ì²­ â†’ ì„±ê³µ (1/3)
2. 11ì›” 4ì¼ OFF ì‹ ì²­ â†’ ì„±ê³µ (2/3)
3. 11ì›” 5ì¼ OFF ì‹ ì²­ â†’ ì„±ê³µ (3/3)
4. 11ì›” 6ì¼ OFF ì‹ ì²­ â†’ ì°¨ë‹¨
   ì˜ˆìƒ ë©”ì‹œì§€: "í˜•í‰ì„± ê¸°ì¤€ ì´ˆê³¼"
```

#### ðŸ”„ ì‹œë‚˜ë¦¬ì˜¤ 3-3: ì—°ì°¨ëŠ” í˜•í‰ì„± í•œë„ì— í¬í•¨ ì•ˆë¨
```
ì „ì œ: ìµœëŒ€ ì‹ ì²­ ê°€ëŠ¥ 3ì¼

1. 11ì›” 3ì¼ ì—°ì°¨ ì‹ ì²­ â†’ ì„±ê³µ (í˜•í‰ì„± ì¹´ìš´íŠ¸ ì•ˆë¨)
2. 11ì›” 4ì¼ OFF ì‹ ì²­ â†’ ì„±ê³µ (1/3)
3. 11ì›” 5ì¼ OFF ì‹ ì²­ â†’ ì„±ê³µ (2/3)
4. 11ì›” 6ì¼ OFF ì‹ ì²­ â†’ ì„±ê³µ (3/3)
5. 11ì›” 7ì¼ OFF ì‹ ì²­ â†’ ì°¨ë‹¨
```

---

## ðŸ§ª í†µí•© í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì§ì›ë³„ í…ŒìŠ¤íŠ¸ (ê° ì§ì›ë§ˆë‹¤)

- [ ] **ì£¼4ì¼ í…ŒìŠ¤íŠ¸**
  - [ ] ê°™ì€ ì£¼ OFF 2ê°œ ì„ íƒ â†’ 3ê°œì§¸ ì°¨ë‹¨
  - [ ] ë‹¤ìŒ ì£¼ëŠ” ë‹¤ì‹œ 2ê°œ ì„ íƒ ê°€ëŠ¥
  - [ ] ì—°ì°¨ëŠ” OFF ì¹´ìš´íŠ¸ ì œì™¸

- [ ] **êµ¬ë¶„ë³„ ìŠ¬ë¡¯ í…ŒìŠ¤íŠ¸**
  - [ ] ìŠ¬ë¡¯ ì—¬ìœ  ìžˆì„ ë•Œ ì‹ ì²­ ì„±ê³µ
  - [ ] ìŠ¬ë¡¯ ë¶€ì¡± ì‹œ ì°¨ë‹¨
  - [ ] ë‹¤ë¥¸ êµ¬ë¶„ì€ ì˜í–¥ ì—†ìŒ

- [ ] **í˜•í‰ì„± í•œë„ í…ŒìŠ¤íŠ¸**
  - [ ] í˜•í‰ì„± í™•ì¸ ì¹´ë“œì—ì„œ í•œë„ í™•ì¸
  - [ ] í•œë„ ë‚´ ì‹ ì²­ ì„±ê³µ
  - [ ] í•œë„ ì´ˆê³¼ ì‹ ì²­ ì°¨ë‹¨
  - [ ] ì—°ì°¨ëŠ” í•œë„ì— í¬í•¨ ì•ˆë¨

### í†µí•© ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸

- [ ] **ë³µí•© ì œì•½ í…ŒìŠ¤íŠ¸**
  - [ ] ì£¼4ì¼ + êµ¬ë¶„ë³„ ìŠ¬ë¡¯ ë™ì‹œ ì²´í¬
  - [ ] ì£¼4ì¼ + í˜•í‰ì„± í•œë„ ë™ì‹œ ì²´í¬
  - [ ] 3ê°€ì§€ ëª¨ë‘ ë™ì‹œ ì²´í¬

- [ ] **ì—ëŸ¬ ë©”ì‹œì§€ ëª…í™•ì„±**
  - [ ] ê° í•„í„°ë³„ ì°¨ë‹¨ ì‹œ ëª…í™•í•œ ë©”ì‹œì§€ í‘œì‹œ
  - [ ] ì–´ë–¤ ì œì•½ ë•Œë¬¸ì— ì°¨ë‹¨ë˜ì—ˆëŠ”ì§€ ëª…ì‹œ

---

## ðŸ” ë””ë²„ê¹… ë°©ë²•

### ì½˜ì†” ë¡œê·¸ í™•ì¸
ë¸Œë¼ìš°ì € ê°œë°œìž ë„êµ¬ (F12) â†’ Console íƒ­ì—ì„œ ë‹¤ìŒ ë¡œê·¸ í™•ì¸:

```
ðŸŽ¯ ë‚ ì§œ ì„ íƒ: 2025-11-17 OFF
ðŸ“… í˜„ìž¬ ì„ íƒ ë‚ ì§œì˜ ì£¼ ë²”ìœ„: 2025-11-16 ~ 2025-11-22
ðŸ“Š ê°™ì€ ì£¼ì— ì´ë¯¸ ì„ íƒí•œ OFF: ['2025-11-17']
âœ… ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼: { canApply: true }
```

### ì„œë²„ ë¡œê·¸ í™•ì¸
í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ë¡œê·¸ í™•ì¸:

```
ðŸ” [ì£¼4ì¼ ì²´í¬] ì£¼ ë²”ìœ„: 2025-11-16 ~ 2025-11-22
ðŸ“Š [ì£¼4ì¼ ì²´í¬] DB OFF ìˆ˜: 1
ðŸ“Š [ì£¼4ì¼ ì²´í¬] ìµœì¢… OFF ìˆ˜ (í˜„ìž¬ ì‹ ì²­ í¬í•¨): 2
```

---

## ðŸ“ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ê¸°ë¡

| ì‹œë‚˜ë¦¬ì˜¤ | ì§ì› | ë‚ ì§œ | ì˜ˆìƒ ê²°ê³¼ | ì‹¤ì œ ê²°ê³¼ | ìƒíƒœ |
|---------|------|------|----------|----------|------|
| ì£¼4ì¼-1 | í˜œìˆ™ | 11/17 | ì„±ê³µ | | â¬œ |
| ì£¼4ì¼-2 | í˜œìˆ™ | 11/18 | ì„±ê³µ | | â¬œ |
| ì£¼4ì¼-3 | í˜œìˆ™ | 11/19 | ì°¨ë‹¨ | | â¬œ |
| êµ¬ë¶„-1 | ì €ë…„ì°¨A | 11/10 | ì„±ê³µ | | â¬œ |
| êµ¬ë¶„-2 | ì €ë…„ì°¨B | 11/10 | ì°¨ë‹¨ | | â¬œ |
| í˜•í‰ì„±-1 | í˜œìˆ™ | í•œë„ í™•ì¸ | 7ì¼ | | â¬œ |
| í˜•í‰ì„±-2 | í˜œìˆ™ | í•œë„+1 | ì°¨ë‹¨ | | â¬œ |

---

## ðŸ’¡ ì¶”ê°€ í™•ì¸ ì‚¬í•­

### DBì—ì„œ ì§ì ‘ í™•ì¸
```sql
-- ì§ì›ë³„ ì´ë²ˆ ë‹¬ ì‹ ì²­ í˜„í™©
SELECT s.name, la.date, la."leaveType", la.status
FROM "LeaveApplication" la
JOIN "Staff" s ON s.id = la."staffId"
WHERE la."clinicId" = 'cmh697itv0001fw83azbrqe60'
  AND la.date >= '2025-11-01'
  AND la.date < '2025-12-01'
ORDER BY s.name, la.date;

-- íŠ¹ì • ë‚ ì§œì˜ êµ¬ë¶„ë³„ ì‹ ì²­ í˜„í™©
SELECT s."categoryName", COUNT(*) as count
FROM "LeaveApplication" la
JOIN "Staff" s ON s.id = la."staffId"
WHERE la.date = '2025-11-10'
  AND la.status IN ('CONFIRMED', 'PENDING')
GROUP BY s."categoryName";
```
