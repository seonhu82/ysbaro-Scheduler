# 연세바로치과 스케줄러 - 개발 가이드

**Claude Code 작업 디렉토리**

---

## 📚 문서 구성

### 필수 참고 문서 (작업 전 반드시 읽기)

1. **00_프로젝트_마스터_플랜.md** ⭐⭐⭐
   - 전체 프로젝트 개요
   - 185개 파일 구조
   - Phase별 로드맵
   - 핵심 난이도별 파일 목록

2. **01_개발_체크리스트.md** ⭐⭐⭐
   - 파일별 상세 작업 목록
   - Phase별 체크리스트
   - 우선순위 파일 (20개)
   - 진행 상황 추적

3. **02_코딩_컨벤션.md** ⭐⭐
   - TypeScript 규칙
   - 네이밍 컨벤션
   - 파일 구조 패턴
   - Git 커밋 규칙

---

## 🎯 빠른 시작 가이드

### 1단계: 프로젝트 이해

```bash
# 마스터 플랜 읽기
cat .claude/00_프로젝트_마스터_플랜.md

# 핵심 기능 확인
# - 원장 패턴 관리
# - 연차/오프 신청 시스템 ⭐ 가장 중요
# - 월간/주간 자동 배치
# - 실시간 알림
# - 형평성 관리
```

### 2단계: 현재 Phase 확인

```bash
# Phase 1 (Week 1-2): 기초 설정 - 25개 파일
# Phase 2 (Week 3-7): 핵심 기능 - 100개 파일
# Phase 3 (Week 8-10): 완성 - 60개 파일
```

### 3단계: 체크리스트 확인

```bash
# 개발 체크리스트 열기
cat .claude/01_개발_체크리스트.md

# 현재 작업할 파일 찾기
# 우선순위 파일부터 시작 권장
```

---

## 📊 프로젝트 통계

```
총 파일: 185개
├── 설정 파일: 6개
├── 페이지: 24개
├── 컴포넌트: 52개
├── API 라우트: 42개
├── 라이브러리: 28개
├── 타입: 7개
└── 기타: 26개

예상 기간: 10주 (400시간)
난이도:
  🔴 어려움 35개 (알고리즘, 동시성, 실시간)
  🟡 보통 70개 (비즈니스 로직)
  🟢 쉬움 80개 (UI, 설정)
```

---

## 🔴 최우선 파일 (반드시 완성)

### 1. 데이터베이스
```
□ prisma/schema.prisma (25개 테이블)
```

### 2. 연차 신청 시스템
```
□ src/app/api/leave-apply/[token]/submit/route.ts  🔴 동시성 제어
□ src/app/(public)/leave-apply/[token]/page.tsx    🔴 신청 페이지
□ src/components/public-apply/RealTimeStatus.tsx   🔴 SSE 클라이언트
□ src/lib/services/leave-service.ts                🔴 비즈니스 로직
```

### 3. 자동 배치
```
□ src/lib/algorithms/monthly-assign.ts             🔴 배치 알고리즘
□ src/lib/algorithms/fairness-calculator.ts        🔴 형평성 계산
□ src/app/api/auto-assign/monthly/route.ts         🔴 API
```

### 4. 실시간 알림
```
□ src/app/api/notifications/sse/route.ts           🔴 SSE 서버
□ src/components/notifications/NotificationPanel.tsx
```

---

## 🛠️ 개발 워크플로우

### 새 파일 작성 시

```bash
1. 체크리스트 확인
   .claude/01_개발_체크리스트.md

2. 코딩 컨벤션 확인
   .claude/02_코딩_컨벤션.md

3. 참고 문서 확인
   docs/연세바로치과_기능명세서_Part2_v2.1.md (연차 관련)
   docs/연세바로치과_기능명세서_Part3_v2.1.md (API, 알고리즘)

4. 파일 작성
   - 타입 정의 먼저
   - 주석 작성
   - 에러 처리 포함

5. 테스트
   - 로컬 테스트
   - API 테스트 (Postman)

6. 커밋
   - 규칙에 맞게 커밋 메시지 작성
   - 작은 단위로 자주 커밋
```

---

## 📁 핵심 참고 문서

### 기획 문서 (../docs/)
```
연세바로치과_완전_개발_계획서_v3.0.md     - 전체 개요
연세바로치과_기능명세서_Part1_v2.1.md     - 섹션 1-3.3.2
연세바로치과_기능명세서_Part2_v2.1.md     - 섹션 3.3.3-3.8 (연차, 배치, 알림)
연세바로치과_기능명세서_Part3_v2.1.md     - 섹션 4-11 (DB, API, 알고리즘)
프로젝트_파일_개수_분석.md                - 파일 구조 분석
```

### 특정 기능 찾기

| 기능 | 참고 문서 | 섹션 |
|------|----------|------|
| **원장 패턴** | Part2 | 3.3.1 |
| **연차 신청 링크 생성** | Part2 | 3.3.2 |
| **직원 신청 페이지** | Part2 | 3.3.3 (line 431-603) ⭐ |
| **연차 관리 대시보드** | Part2 | 3.3.4 |
| **월간 자동 배치** | Part2 | 3.4 |
| **형평성 계산** | Part2 | 3.5 |
| **실시간 알림 (SSE)** | Part2 | 3.7 |
| **Prisma 스키마** | Part3 | 4.1 |
| **모든 API** | Part3 | 5 |
| **비즈니스 로직** | Part3 | 6 |
| **알고리즘** | Part3 | 7 |
| **보안** | Part3 | 8 |
| **테스트** | Part3 | 10 |

---

## 💡 개발 팁

### 막혔을 때
1. 체크리스트 다시 확인
2. 기능명세서 해당 섹션 읽기
3. 유사한 기존 파일 참고
4. 코딩 컨벤션 확인

### 복잡한 기능 구현 시
1. 타입 정의부터 시작
2. 단순한 버전부터 구현
3. 점진적으로 복잡도 증가
4. 각 단계마다 테스트

### 에러 해결
1. TypeScript 에러 먼저 해결
2. 콘솔 로그 확인
3. 데이터베이스 연결 확인
4. API 응답 형식 확인

---

## 🎯 Phase별 중점 사항

### Phase 1 (Week 1-2)
- Prisma 스키마 완벽하게 작성
- 기본 인증 동작 확인
- 달력 기본 구조만 완성

### Phase 2 (Week 3-7) ⭐ 가장 중요
- 연차 신청 시스템 완벽 구현
  - 동시성 제어
  - 슬롯 제한
  - 주간 오프 제한
  - 휴일 체크
- 월간 배치 알고리즘
- 실시간 알림 (SSE)

### Phase 3 (Week 8-10)
- 나머지 기능 완성
- 테스트 작성
- 배포 준비

---

## ✅ 체크리스트 템플릿

### 파일 작성 전
```
□ 해당 파일의 체크리스트 확인
□ 타입 정의 확인
□ 참고 문서 확인
```

### 파일 작성 중
```
□ 코딩 컨벤션 준수
□ 타입 안정성 100%
□ 에러 처리 포함
□ 주석 작성
```

### 파일 작성 후
```
□ ESLint 에러 없음
□ TypeScript 에러 없음
□ 로컬 테스트 완료
□ 커밋 메시지 작성
```

---

## 🚨 주의사항

### 절대 하지 말 것
- ❌ any 타입 사용
- ❌ 인증 없는 API
- ❌ 에러 처리 생략
- ❌ 거대한 커밋
- ❌ 테스트 없이 진행

### 반드시 할 것
- ✅ 타입 명시
- ✅ 트랜잭션 사용 (일관성 필요 시)
- ✅ try-catch 블록
- ✅ 작은 단위 커밋
- ✅ 각 단계마다 테스트

---

## 📞 도움이 필요할 때

### 문서 참고 순서
1. `.claude/01_개발_체크리스트.md` - 작업 목록
2. `.claude/02_코딩_컨벤션.md` - 코딩 규칙
3. `docs/연세바로치과_기능명세서_Part2_v2.1.md` - 연차 시스템
4. `docs/연세바로치과_기능명세서_Part3_v2.1.md` - API, 알고리즘

### 예시 코드 위치
- API 라우트: Part3 섹션 5
- 컴포넌트: Part1, Part2 UI 섹션
- 알고리즘: Part2 섹션 3.4, Part3 섹션 7
- 데이터베이스: Part3 섹션 4

---

## 🎉 완성 기준

### 기능
- ✅ 모든 핵심 기능 동작
- ✅ 에러 없이 안정적 운영
- ✅ 실제 사용 가능한 수준

### 코드
- ✅ TypeScript 타입 안정성 100%
- ✅ ESLint 에러 0개
- ✅ 일관된 코딩 스타일

### 테스트
- ✅ 핵심 기능 테스트 작성
- ✅ 로컬 테스트 통과
- ✅ 프로덕션 배포 가능

---

**행운을 빕니다! 화이팅!** 🚀
