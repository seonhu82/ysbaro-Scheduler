# 연세바로치과 스케줄러 - 작업 시작 가이드

**개발 시작 전 필독**

---

## 🎯 프로젝트 요약

### 핵심 정보
- **프로젝트명**: 연세바로치과 스케줄 관리 시스템
- **기술 스택**: Next.js 14 + TypeScript + Prisma + PostgreSQL
- **총 파일**: 185개
- **예상 기간**: 10주 (400시간)

### 핵심 기능
1. **원장 요일별 패턴 관리** - 월간 일괄 적용
2. **연차/오프 신청 시스템** ⭐ - 실시간, 슬롯 제한, 주 2일 오프 제한
3. **연차 관리 대시보드** - 달력/목록/직원별 뷰
4. **월간/주간 자동 배치** - 비율 기반, 형평성 고려
5. **실시간 알림** - Server-Sent Events
6. **형평성 관리** - 야간/주말 근무 균형
7. **스케줄 배포** - 외부 확인 링크

---

## 📁 문서 구조

### `.claude/` - Claude Code 전용 가이드
```
.claude/
├── README.md                    ⭐ 종합 가이드
├── 00_프로젝트_마스터_플랜.md   ⭐ 전체 계획
├── 01_개발_체크리스트.md       ⭐ 파일별 작업 목록
└── 02_코딩_컨벤션.md           ⭐ 코딩 규칙
```

### `docs/` - 기획 문서
```
docs/
├── 연세바로치과_완전_개발_계획서_v3.0.md
├── 연세바로치과_기능명세서_Part1_v2.1.md (섹션 1-3.3.2)
├── 연세바로치과_기능명세서_Part2_v2.1.md (섹션 3.3.3-3.8) ⭐ 연차, 배치
├── 연세바로치과_기능명세서_Part3_v2.1.md (섹션 4-11) ⭐ API, 알고리즘
└── 프로젝트_파일_개수_분석.md
```

---

## 🚀 빠른 시작 (5분)

### 1단계: 전체 구조 파악
```bash
# 마스터 플랜 읽기 (10분)
cat .claude/00_프로젝트_마스터_플랜.md

# 핵심 내용:
# - 185개 파일 구조
# - Phase 1-3 로드맵
# - 우선순위 파일 20개
```

### 2단계: 작업 목록 확인
```bash
# 개발 체크리스트 (상세)
cat .claude/01_개발_체크리스트.md

# 현재 Phase의 작업 찾기
# Phase 1 (Week 1-2): 25개 파일 - 기초 설정
# Phase 2 (Week 3-7): 100개 파일 - 핵심 기능 ⭐
# Phase 3 (Week 8-10): 60개 파일 - 완성
```

### 3단계: 코딩 규칙 숙지
```bash
# 코딩 컨벤션
cat .claude/02_코딩_컨벤션.md

# 핵심:
# - TypeScript: any 금지, 타입 명시
# - 네이밍: camelCase, PascalCase
# - 에러 처리: 항상 try-catch
```

---

## 📋 개발 워크플로우

### 새 파일 작성 시 (매번)

```
1. 체크리스트 확인
   └─ .claude/01_개발_체크리스트.md

2. 기능명세서 확인
   └─ docs/연세바로치과_기능명세서_Part2_v2.1.md (연차 관련)
   └─ docs/연세바로치과_기능명세서_Part3_v2.1.md (API, 알고리즘)

3. 코딩 컨벤션 확인
   └─ .claude/02_코딩_컨벤션.md

4. 파일 작성
   - 타입 정의 먼저
   - 주석 작성
   - 에러 처리 포함

5. 테스트

6. 커밋 (작은 단위)
```

---

## 🔴 최우선 파일 (반드시 완성)

### 1. 데이터베이스
```
□ prisma/schema.prisma
  → 25개 테이블 완전 정의
  → 참고: docs/연세바로치과_기능명세서_Part3_v2.1.md 섹션 4.1
```

### 2. 연차 신청 시스템 (가장 중요)
```
□ src/app/api/leave-apply/[token]/submit/route.ts
  → 동시성 제어 (트랜잭션)
  → 슬롯 제한 확인
  → 주 2일 오프 제한
  → 휴일 체크
  → 참고: Part2 섹션 3.3.3 (line 431-603)

□ src/app/(public)/leave-apply/[token]/page.tsx
  → 직원 신청 페이지
  → 실시간 슬롯 현황

□ src/lib/services/leave-service.ts
  → 비즈니스 로직
```

### 3. 자동 배치 알고리즘
```
□ src/lib/algorithms/monthly-assign.ts
  → 월간 배치
  → 비율 기반 선발
  → 형평성 고려
  → 참고: Part2 섹션 3.4

□ src/lib/algorithms/fairness-calculator.ts
  → 형평성 점수 계산
  → 참고: Part2 섹션 3.5
```

### 4. 실시간 알림
```
□ src/app/api/notifications/sse/route.ts
  → Server-Sent Events
  → 참고: Part2 섹션 3.7
```

---

## 💡 개발 팁

### 막혔을 때
1. 체크리스트 다시 확인
2. 기능명세서 해당 섹션 읽기
3. 코딩 컨벤션 확인

### 복잡한 기능
1. 타입 정의부터
2. 단순한 버전부터
3. 점진적으로 복잡도 증가

### 자주 사용할 문서
- **연차 신청**: `docs/연세바로치과_기능명세서_Part2_v2.1.md` 섹션 3.3.3
- **자동 배치**: `docs/연세바로치과_기능명세서_Part2_v2.1.md` 섹션 3.4
- **API 전체**: `docs/연세바로치과_기능명세서_Part3_v2.1.md` 섹션 5
- **Prisma**: `docs/연세바로치과_기능명세서_Part3_v2.1.md` 섹션 4.1

---

## 📊 진행 추적

### Phase별 진행
```
Phase 1: [ ] 0/25 (0%) - Week 1-2
Phase 2: [ ] 0/100 (0%) - Week 3-7 ⭐
Phase 3: [ ] 0/60 (0%) - Week 8-10

전체: [ ] 0/185 (0%)
```

### 주요 마일스톤
```
Week 1-2:  Prisma 스키마 + 기본 인증 + 달력
Week 3:    원장 패턴 관리
Week 4:    연차 신청 시스템 ⭐
Week 5:    연차 관리 대시보드
Week 6:    자동 배치 알고리즘 ⭐
Week 7:    실시간 알림
Week 8:    통계 + 설정
Week 9:    스케줄 배포 + 백업
Week 10:   테스트 + 배포
```

---

## ✅ 완성 기준

### 기능
- ✅ 모든 핵심 기능 동작
- ✅ 에러 없이 안정적 운영
- ✅ 실제 사용 가능

### 코드
- ✅ TypeScript 타입 100%
- ✅ ESLint 에러 0개
- ✅ 일관된 스타일

### 테스트
- ✅ 핵심 기능 테스트
- ✅ 프로덕션 배포 가능

---

## 🎯 지금 바로 시작하기

### 1. 문서 읽기 (필수)
```bash
# 1순위: 마스터 플랜 (10분)
cat .claude/00_프로젝트_마스터_플랜.md

# 2순위: 개발 체크리스트 (5분)
cat .claude/01_개발_체크리스트.md

# 3순위: 코딩 컨벤션 (5분)
cat .claude/02_코딩_컨벤션.md
```

### 2. Phase 1 시작
```bash
# Week 1: 환경 설정
1. Next.js 프로젝트 생성
2. Prisma 스키마 작성 ⭐ 가장 중요
3. Seed 데이터 작성
4. 인증 시스템 구현

# 참고: .claude/01_개발_체크리스트.md Phase 1 섹션
```

---

## 📞 도움말

### 빠른 참조
- 전체 계획: `.claude/00_프로젝트_마스터_플랜.md`
- 작업 목록: `.claude/01_개발_체크리스트.md`
- 코딩 규칙: `.claude/02_코딩_컨벤션.md`

### 기능별 참조
| 기능 | 문서 | 섹션 |
|------|------|------|
| 연차 신청 | Part2 | 3.3.3 |
| 자동 배치 | Part2 | 3.4 |
| 실시간 알림 | Part2 | 3.7 |
| Prisma | Part3 | 4.1 |
| 모든 API | Part3 | 5 |

---

## 🚨 주의사항

### 하지 말 것
- ❌ any 타입 사용
- ❌ 에러 처리 생략
- ❌ 거대한 커밋
- ❌ 테스트 없이 진행

### 반드시 할 것
- ✅ 타입 명시
- ✅ try-catch
- ✅ 작은 커밋
- ✅ 단계별 테스트

---

**준비되셨나요? 시작하세요!** 🚀

**첫 번째 파일**: `prisma/schema.prisma`
**참고 문서**: `docs/연세바로치과_기능명세서_Part3_v2.1.md` 섹션 4.1
